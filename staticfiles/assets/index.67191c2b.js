var e=Object.assign;import{r as t,a,o as l,c as s,b as n,w as r,d,t as o,u as c,e as u,f as i,p,g as m,h,F as v,i as g,j as b,k as y,l as f,m as x,n as k,q as P,v as I,s as V,x as C,y as w,z as U,T as S,A as _,B as E,C as O,D as T,E as N,G as D,H as q,I as L}from"./vendor.9c11db83.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const l=new URL(e,location),s=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,n)=>{const r=new URL(e,l);if(self[t].moduleMap[r])return a(self[t].moduleMap[r]);const d=new Blob([`import * as m from '${r}';`,`${t}.moduleMap['${r}']=m;`],{type:"text/javascript"}),o=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(d),onerror(){n(new Error(`Failed to import: ${e}`)),s(o)},onload(){a(self[t].moduleMap[r]),s(o)}});document.head.appendChild(o)})),self[t].moduleMap={}}}("/assets/");const B={inject:["t"],setup(){const e=t(!1);return{show:e,toggleShow:()=>{e.value=!e.value}}}},R={class:"navbar",role:"navigation","aria-label":"main navigation"},j={class:"navbar-brand"},F=n("span",{"aria-hidden":"true"},null,-1),A=n("span",{"aria-hidden":"true"},null,-1),$=n("span",{"aria-hidden":"true"},null,-1),M={class:"navbar-start"};B.render=function(e,t,c,u,i,p){const m=a("router-link");return l(),s("nav",R,[n("div",j,[n("a",{role:"button",class:["navbar-burger",{"is-active":u.show}],"aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",onClick:t[1]||(t[1]=(...e)=>u.toggleShow&&u.toggleShow(...e))},[F,A,$],2)]),n("div",{id:"navbarBasicExample",class:["navbar-menu",{"is-active":u.show}]},[n("div",M,[n(m,{to:{name:"products"},class:"navbar-item"},{default:r((()=>[d(o(p.t("navbar.products")),1)])),_:1}),n(m,{to:{name:"customers"},class:"navbar-item"},{default:r((()=>[d(o(p.t("navbar.customers")),1)])),_:1}),n(m,{to:{name:"orders"},class:"navbar-item"},{default:r((()=>[d(o(p.t("navbar.orders")),1)])),_:1}),n(m,{to:{name:"settings"},class:"navbar-item"},{default:r((()=>[d(o(p.t("navbar.settings")),1)])),_:1})])],2)])};const H={components:{Navbar:B},provide(){return{t:this.t,n:this.n}},setup(){const{t:e,n:t}=c(),a=i();return u((()=>{a.dispatch("setLanguage")})),{t:e,n:t}}},K={class:"container"};H.render=function(e,t,r,d,o,c){const u=a("Navbar"),i=a("router-view");return l(),s("div",K,[n(u),n(i)])};const G={props:["product"],inject:["n"],setup:e=>({firstUnit:h((()=>e.product.active?e.product.units[0]:void 0)),otherUnits:h((()=>e.product.active?e.product.units.slice(1):[])),rowSpan:h((()=>e.product.active?Math.max(e.product.units.length,1):1)),toLink:h((()=>({name:"product-detail",params:{id:e.product.id}})))})},z=b("data-v-088108ed");p("data-v-088108ed");const Q={class:"has-text-right"},X={class:"has-text-right"};m();const J=z(((e,t,r,c,u,i)=>{var p;const m=a("router-link");return l(),s(v,null,[n("tr",null,[n("td",{rowspan:c.rowSpan,class:"product-name"},[n(m,{to:c.toLink,class:{deleted:!r.product.active}},{default:z((()=>[d(o(r.product.name),1)])),_:1},8,["to","class"])],8,["rowspan"]),n("td",null,o((null==(p=c.firstUnit)?void 0:p.name)||""),1),n("td",Q,o(c.firstUnit?i.n(parseFloat(c.firstUnit.price),"currency"):""),1)]),(l(!0),s(v,null,g(c.otherUnits,(e=>(l(),s("tr",{key:e.id},[n("td",null,o(e.name),1),n("td",X,o(i.n(parseFloat(e.price),"currency")),1)])))),128))],64)}));G.render=J,G.__scopeId="data-v-088108ed";const W={components:{ProductRow:G},inject:["t"],setup(){const e=i();u((()=>{e.dispatch("products/fetchProducts")}));return{products:h((()=>e.getters["products/products"]))}}},Y={class:"title is-4 has-text-centered mt-2"},Z={class:"table is-bordered mb-5"},ee={class:"has-text-centered"};W.render=function(e,t,r,d,c,u){const i=a("ProductRow");return l(),s(v,null,[n("h4",Y,o(u.t("products.list")),1),n("table",Z,[n("thead",null,[n("tr",ee,[n("th",null,o(u.t("products.table.product")),1),n("th",null,o(u.t("products.table.unit")),1),n("th",null,o(u.t("products.table.price")),1)])]),n("tbody",null,[(l(!0),s(v,null,g(d.products,(e=>(l(),s(i,{key:e.id,product:e},null,8,["product"])))),128))])])],64)};const te={props:{type:{type:String,default:"text"},icon:{type:String,default:""},placeholder:{type:String,default:""},modelValue:{required:!0},label:{type:String,default:""},blur:{type:Function,default:()=>{}},focus:{type:Function,default:()=>{}},readonly:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,a){const l=t(null);return{handleInput:e=>{a.emit("update:modelValue",e.target.value)},blur_:()=>{setTimeout(e.blur,200)},enter:()=>{l.value.blur()},inputRef:l}}},ae={class:"field"},le={key:0,class:"label"},se={key:0,class:"icon is-small is-left"};te.render=function(e,t,a,r,d,c){return l(),s("div",ae,[a.label?(l(),s("label",le,o(a.label),1)):y("",!0),n("div",{class:["control",{"has-icons-left":!!a.icon}]},[n("input",{ref:"inputRef",class:["input",{"has-text-right":"number"===a.type}],type:a.type,placeholder:a.placeholder,value:a.modelValue,onInput:t[1]||(t[1]=(...e)=>r.handleInput&&r.handleInput(...e)),onBlur:t[2]||(t[2]=(...e)=>r.blur_&&r.blur_(...e)),onFocus:t[3]||(t[3]=(...e)=>a.focus&&a.focus(...e)),onKeypress:t[4]||(t[4]=f(((...e)=>r.enter&&r.enter(...e)),["enter"])),readonly:a.readonly},null,42,["type","placeholder","value","readonly"]),a.icon?(l(),s("span",se,[n("i",{class:`fas ${a.icon}`},null,2)])):y("",!0)],2)])};const ne={components:{UnrequiredInput:te},props:["type","icon","placeholder","modelValue","label","time","blur","focus"],emits:["update:modelValue"],setup(e,a){let l=null;const s=t(e.modelValue);return x(e,(()=>{e.modelValue!==s.value&&(s.value=e.modelValue)})),x(s,(()=>{l&&clearTimeout(l),l=setTimeout((()=>{a.emit("update:modelValue",s.value)}),e.time||400)})),{value:s}}};ne.render=function(e,t,n,r,d,o){const c=a("UnrequiredInput");return l(),s(c,{type:n.type,icon:n.icon,placeholder:n.placeholder,label:n.label,modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=e=>r.value=e),blur:n.blur,focus:n.focus},null,8,["type","icon","placeholder","label","modelValue","blur","focus"])};const re={components:{DebounceInput:ne},props:{label:{type:String,default:"search"},placeholder:{type:String,default:""},actionName:{type:String,default:""},paramName:{type:String,default:"name"}},setup(e){const a=t(""),l=i(),s=k("t");x(a,(()=>{""!==e.actionName&&l.dispatch(e.actionName,{[e.paramName]:a.value})}));const n=h((()=>""!==e.label?s(e.label):"")),r=h((()=>""!==e.placeholder?s(e.placeholder):""));return{searchName:a,label:n,placeholder:r}}},de=b("data-v-2d748c2f");p("data-v-2d748c2f");const oe={class:"list-search"};m();const ce=de(((e,t,r,d,o,c)=>{const u=a("DebounceInput");return l(),s("div",oe,[n(u,{type:"text",modelValue:d.searchName,"onUpdate:modelValue":t[1]||(t[1]=e=>d.searchName=e),label:d.label,placeholder:d.placeholder},null,8,["modelValue","label","placeholder"])])}));re.render=ce,re.__scopeId="data-v-2d748c2f";const ue={components:{ListSearch:re}};ue.render=function(e,t,n,r,d,o){const c=a("ListSearch");return l(),s(c,{placeholder:"products.searchPlaceholder",actionName:"products/fetchProducts"})};const ie={components:{ProductList:W,ProductSearch:ue},inject:["t"]},pe={class:"table-page"},me={class:"has-text-right"};ie.render=function(e,t,c,u,i,p){const m=a("router-link"),h=a("ProductSearch"),v=a("ProductList");return l(),s("div",pe,[n("div",me,[n(m,{to:{name:"product-add"},class:"button is-primary is-outlined"},{default:r((()=>[d(o(p.t("products.addButton")),1)])),_:1})]),n(h),n(v)])};const he={props:["type","icon","placeholder","modelValue","validate","label"],emits:["update:modelValue"],setup(e,a){const l=t(!1);return{invalid:l,handleInput:e=>{a.emit("update:modelValue",e.target.value)},validateInput:()=>{e.validate&&(l.value=e.validate(e.modelValue)),""===e.modelValue&&(l.value=!0)}}}},ve={class:"field"},ge={key:0,class:"label"},be={key:0,class:"icon is-small is-left"},ye={key:1,class:"icon is-small is-right has-text-danger"},fe=n("i",{class:"fas fa-exclamation-circle"},null,-1);he.render=function(e,t,a,r,d,c){return l(),s("div",ve,[a.label?(l(),s("label",ge,o(a.label),1)):y("",!0),n("div",{class:["control",{"has-icons-left":!!a.icon,"has-icons-right":r.invalid}]},[n("input",{class:["input",{"is-danger":r.invalid,"has-text-right":"number"===a.type}],type:a.type,placeholder:a.placeholder,value:a.modelValue,onInput:t[1]||(t[1]=(...e)=>r.handleInput&&r.handleInput(...e)),onBlur:t[2]||(t[2]=(...e)=>r.validateInput&&r.validateInput(...e)),onFocus:t[3]||(t[3]=e=>r.invalid=!1),required:""},null,42,["type","placeholder","value"]),a.icon?(l(),s("span",be,[n("i",{class:`fas ${a.icon}`},null,2)])):y("",!0),r.invalid?(l(),s("span",ye,[fe])):y("",!0)],2)])};const xe={components:{RequiredInput:he},inject:["t"],setup(){const e=t(""),a=t(""),l=i();return{name:e,description:a,onSubmit:async()=>{await l.dispatch("products/addProduct",{name:e.value,description:a.value})}}}},ke=b("data-v-3591c416");p("data-v-3591c416");const Pe={class:"title is-4 has-text-centered"},Ie={class:"field"},Ve={class:"label"},Ce={class:"control"},we={class:"field is-grouped is-grouped-centered"},Ue={class:"control"},Se={class:"control"};m();const _e=ke(((e,t,r,c,u,i)=>{const p=a("RequiredInput"),m=a("router-link");return l(),s(v,null,[n("h4",Pe,o(i.t("products.addTitle")),1),n("form",{onSubmit:t[3]||(t[3]=V(((...e)=>c.onSubmit&&c.onSubmit(...e)),["prevent"]))},[n(p,{label:i.t("products.name"),placeholder:i.t("products.namePlaceholder"),modelValue:c.name,"onUpdate:modelValue":t[1]||(t[1]=e=>c.name=e),type:"text"},null,8,["label","placeholder","modelValue"]),n("div",Ie,[n("label",Ve,o(i.t("products.description")),1),n("div",Ce,[P(n("textarea",{class:"textarea",placeholder:i.t("products.descriptionPlaceholder"),"onUpdate:modelValue":t[2]||(t[2]=e=>c.description=e)},null,8,["placeholder"]),[[I,c.description]])])]),n("div",we,[n("div",Ue,[n("button",{type:"submit",class:"button is-primary",style:{width:"100px"},disabled:!c.name},o(i.t("add")),9,["disabled"])]),n("div",Se,[n(m,{to:{name:"products"},class:"button is-link is-light",style:{width:"100px"}},{default:ke((()=>[d(o(i.t("cancel")),1)])),_:1})])])],32)],64)}));xe.render=_e,xe.__scopeId="data-v-3591c416";const Ee={props:["placeholder","modelValue"],emits:["update:modelValue"],setup(e,a){const{n:l,locale:s}=c(),n=t(null);C((()=>{n.value.value=l(parseFloat(e.modelValue||0),"currency")})),x(e,(()=>{const t=n.value.value.length,a=n.value.selectionStart,s=l(parseFloat(e.modelValue),"currency"),r=a+s.length-t;n.value.value=s,n.value.setSelectionRange(r,r)}));return{handleInput:e=>{let t=e.target.value;"vi"===s.value&&(t=t.replace(/\./g,""),t=t.replace(/,/g,".")),t=t.replace(/,/g,""),t=t.replace(/[^\d.]/g,""),a.emit("update:modelValue",t)},inputRef:n}}},Oe={class:"field"},Te={class:"control"};Ee.render=function(e,t,a,r,d,o){return l(),s("div",Oe,[n("div",Te,[n("input",{ref:"inputRef",class:"input has-text-right",type:"text",placeholder:a.placeholder,onInput:t[1]||(t[1]=(...e)=>r.handleInput&&r.handleInput(...e)),required:""},null,40,["placeholder"])])])};const Ne={components:{RequiredInput:he,Currency:Ee},props:["unit"],inject:["t","n"],setup(e){const a=t(!1),l=t(e.unit.name),s=t(e.unit.price),n=i();return{isEditing:a,name:l,price:s,deactivate:()=>{n.dispatch("products/deactivateUnit",e.unit.id)},activate:()=>{n.dispatch("products/activateUnit",e.unit.id)},save:async()=>{l.value&&s.value&&(await n.dispatch("products/editUnit",{unitId:e.unit.id,payload:{name:l.value,price:s.value}}),a.value=!1)}}}},De=b("data-v-4b6fdcbd");p("data-v-4b6fdcbd");const qe={class:"has-text-right"},Le={key:0,class:"v-align"},Be=n("i",{class:"fas fa-save"},null,-1),Re={key:1},je=n("i",{class:"fas fa-pen"},null,-1),Fe={key:2,colspan:"2",class:"has-text-centered"},Ae=n("i",{class:"fas fa-history"},null,-1),$e={key:3,class:"v-align"},Me=n("i",{class:"fas fa-history"},null,-1),He={key:4},Ke=n("i",{class:"fas fa-trash-alt"},null,-1);m();const Ge=De(((e,t,r,d,c,u)=>{const i=a("RequiredInput"),p=a("Currency");return l(),s("tr",null,[n("td",null,[d.isEditing?(l(),s(i,{key:0,type:"text",modelValue:d.name,"onUpdate:modelValue":t[1]||(t[1]=e=>d.name=e),placeholder:u.t("units.namePlaceholder")},null,8,["modelValue","placeholder"])):(l(),s("span",{key:1,class:{deleted:!r.unit.active}},o(r.unit.name),3))]),n("td",qe,[d.isEditing?(l(),s(p,{key:0,modelValue:d.price,"onUpdate:modelValue":t[2]||(t[2]=e=>d.price=e),placeholder:u.t("units.pricePlaceholder")},null,8,["modelValue","placeholder"])):(l(),s("span",{key:1,class:{deleted:!r.unit.active}},o(u.n(parseFloat(r.unit.price),"currency")),3))]),d.isEditing?(l(),s("td",Le,[n("span",{class:"icon has-text-info",onClick:t[3]||(t[3]=(...e)=>d.save&&d.save(...e)),title:u.t("save")},[Be],8,["title"])])):r.unit.active?(l(),s("td",Re,[n("span",{class:"icon has-text-info",onClick:t[4]||(t[4]=e=>d.isEditing=!0),title:u.t("edit")},[je],8,["title"])])):(l(),s("td",Fe,[n("span",{onClick:t[5]||(t[5]=(...e)=>d.activate&&d.activate(...e)),class:"icon has-text-primary",title:u.t("recover")},[Ae],8,["title"])])),d.isEditing?(l(),s("td",$e,[n("span",{onClick:t[6]||(t[6]=e=>d.isEditing=!1),class:"icon",title:u.t("cancel")},[Me],8,["title"])])):r.unit.active?(l(),s("td",He,[n("span",{onClick:t[7]||(t[7]=(...e)=>d.deactivate&&d.deactivate(...e)),class:"icon has-text-danger",title:u.t("delete")},[Ke],8,["title"])])):y("",!0)])}));Ne.render=Ge,Ne.__scopeId="data-v-4b6fdcbd";const ze={components:{RequiredInput:he,Unit:Ne,Currency:Ee},props:["productId","units"],inject:["t"],setup(e){const a=t(""),l=t(0),s=i();return{name:a,price:l,click:async()=>{await s.dispatch("products/addUnit",{product:e.productId,name:a.value,price:l.value}),a.value="",l.value=0}}}},Qe=b("data-v-702d47f0");p("data-v-702d47f0");const Xe={class:"title is-5 has-text-centered"},Je={class:"table is-bordered"},We={class:"has-text-centered"},Ye={colspan:"2"},Ze={colspan:"2",class:"has-text-centered"};m();const et=Qe(((e,t,r,d,c,u)=>{const i=a("Unit"),p=a("RequiredInput"),m=a("Currency");return l(),s(v,null,[n("h5",Xe,o(u.t("units.title")),1),n("table",Je,[n("thead",null,[n("tr",We,[n("th",null,o(u.t("units.name")),1),n("th",null,o(u.t("units.price")),1),n("th",Ye,o(u.t("units.action")),1)])]),n("tbody",null,[(l(!0),s(v,null,g(r.units,(e=>(l(),s(i,{key:e.id,unit:e},null,8,["unit"])))),128)),n("tr",null,[n("td",null,[n(p,{type:"text",placeholder:u.t("units.namePlaceholder"),modelValue:d.name,"onUpdate:modelValue":t[1]||(t[1]=e=>d.name=e)},null,8,["placeholder","modelValue"])]),n("td",null,[n(m,{modelValue:d.price,"onUpdate:modelValue":t[2]||(t[2]=e=>d.price=e),placeholder:u.t("units.pricePlaceholder")},null,8,["modelValue","placeholder"])]),n("td",Ze,[n("button",{disabled:!d.name||!d.price,onClick:t[3]||(t[3]=(...e)=>d.click&&d.click(...e)),class:"button is-primary"},o(u.t("add")),9,["disabled"])])])])])],64)}));ze.render=et,ze.__scopeId="data-v-702d47f0";const tt={components:{Units:ze,RequiredInput:he},inject:["t"],setup(){const e=w(),a=i(),l=t(!1),s=t(""),n=t("");u((()=>{a.dispatch("products/fetchProduct",e.params.id)}));const r=h((()=>a.getters["products/product"]));x(r,(()=>{s.value=r.value.name,n.value=r.value.description}));const d=h((()=>{var e;return(null==(e=r.value)?void 0:e.active)?"":"deleted"}));return{product:r,isEditing:l,name:s,description:n,save:async()=>{s.value&&(await a.dispatch("products/editProduct",{name:s.value,description:n.value}),l.value=!1)},activate:async()=>{await a.dispatch("products/activateProduct")},deactivate:async()=>{await a.dispatch("products/deactivateProduct")},deleted:d}}},at=b("data-v-e2adc464");p("data-v-e2adc464");const lt={class:"title is-3 has-text-centered"},st={class:"table is-bordered"},nt={class:"has-text-centered"},rt={key:0,class:"control"},dt={key:0,class:"has-text-centered button-group"},ot={key:1,class:"has-text-centered button-group"},ct={key:2,class:"has-text-centered button-group"};m();const ut=at(((e,t,r,d,c,u)=>{var i,p,m,h,g,b;const f=a("RequiredInput"),x=a("Units");return l(),s(v,null,[n("h3",lt,o(u.t("products.detailTitle")),1),n("table",st,[n("tbody",null,[n("tr",null,[n("th",null,o(u.t("products.name")),1),n("td",nt,[d.isEditing?(l(),s(f,{key:0,type:"text",modelValue:d.name,"onUpdate:modelValue":t[1]||(t[1]=e=>d.name=e),placeholder:u.t("products.namePlaceholder")},null,8,["modelValue","placeholder"])):(l(),s("strong",{key:1,class:d.deleted},o(null==(i=d.product)?void 0:i.name),3))])]),n("tr",null,[n("th",null,o(u.t("products.description")),1),n("td",null,[d.isEditing?(l(),s("div",rt,[P(n("textarea",{class:"textarea",placeholder:u.t("products.descriptionPlaceholder"),"onUpdate:modelValue":t[2]||(t[2]=e=>d.description=e)},null,8,["placeholder"]),[[I,d.description]])])):(l(),s("span",{key:1,class:d.deleted},o(null==(p=d.product)?void 0:p.description),3))])])])]),(null==(m=d.product)?void 0:m.active)?d.isEditing?(l(),s("div",ot,[n("button",{onClick:t[4]||(t[4]=(...e)=>d.save&&d.save(...e)),class:"button is-info mx-5"},o(u.t("save")),1),n("button",{onClick:t[5]||(t[5]=e=>d.isEditing=!1),class:"button mx-5"},o(u.t("cancel")),1)])):(l(),s("div",ct,[n("button",{onClick:t[6]||(t[6]=e=>d.isEditing=!0),class:"button is-info mx-5"},o(u.t("edit")),1),n("button",{onClick:t[7]||(t[7]=(...e)=>d.deactivate&&d.deactivate(...e)),class:"button is-danger mx-5"},o(u.t("delete")),1)])):(l(),s("div",dt,[n("button",{onClick:t[3]||(t[3]=(...e)=>d.activate&&d.activate(...e)),class:"button is-primary"},o(u.t("recover")),1)])),(null==(h=d.product)?void 0:h.active)?(l(),s(x,{key:3,productId:null==(g=d.product)?void 0:g.id,units:null==(b=d.product)?void 0:b.units},null,8,["productId","units"])):y("",!0)],64)}));tt.render=ut,tt.__scopeId="data-v-e2adc464";var it=[{path:"/",name:"home",component:ie},{path:"/products",name:"products",component:ie},{path:"/products/add",name:"product-add",component:xe},{path:"/products/:id",name:"product-detail",component:tt}];const pt={props:["customer"],inject:["n"]},mt=b("data-v-4c2d9d0d");p("data-v-4c2d9d0d");const ht={class:"has-text-center"},vt={class:"ellipsis"},gt={class:"has-text-right"};m();const bt=mt(((e,t,r,d,c,u)=>{const i=a("router-link");return l(),s("tr",null,[n("td",null,[n(i,{to:{name:"customer-detail",params:{id:r.customer.id}}},{default:mt((()=>[n("span",null,o(r.customer.name),1)])),_:1},8,["to"])]),n("td",ht,[n("span",null,o(r.customer.phone),1)]),n("td",vt,[n("span",null,o(r.customer.address),1)]),n("td",gt,o(u.n(parseFloat(r.customer.debt),"currency")),1)])}));pt.render=bt,pt.__scopeId="data-v-4c2d9d0d";const yt={components:{CustomerRow:pt},inject:["t"],setup(){const e=i();u((()=>{e.dispatch("customers/fetchCustomers")}));return{customers:h((()=>e.getters["customers/customers"]))}}},ft={class:"title is-4 has-text-centered mt-2"},xt={class:"table is-bordered mb-5"},kt={class:"has-text-centered"},Pt={style:{width:"110px"}},It={style:{width:"130px"}};yt.render=function(e,t,r,d,c,u){const i=a("CustomerRow");return l(),s(v,null,[n("h4",ft,o(u.t("customers.list")),1),n("table",xt,[n("thead",null,[n("tr",kt,[n("th",null,o(u.t("customers.table.customer")),1),n("th",Pt,o(u.t("customers.table.phone")),1),n("th",null,o(u.t("customers.table.address")),1),n("th",It,o(u.t("customers.table.debt")),1)])]),n("tbody",null,[(l(!0),s(v,null,g(d.customers,(e=>(l(),s(i,{key:e.id,customer:e},null,8,["customer"])))),128))])])],64)};const Vt={components:{ListSearch:re}};Vt.render=function(e,t,n,r,d,o){const c=a("ListSearch");return l(),s(c,{placeholder:"customers.searchPlaceholder",actionName:"customers/fetchCustomers"})};const Ct={components:{CustomerList:yt,CustomerSearch:Vt},inject:["t"]},wt={class:"table-page"},Ut={class:"has-text-right"};Ct.render=function(e,t,c,u,i,p){const m=a("router-link"),h=a("CustomerSearch"),v=a("CustomerList");return l(),s("div",wt,[n("div",Ut,[n(m,{to:{name:"customer-add"},class:"button is-primary is-outlined"},{default:r((()=>[d(o(p.t("customers.addButton")),1)])),_:1})]),n(h),n(v)])};const St={props:["order"],inject:["t","n"],setup(e){const t=h((()=>parseFloat(e.order.subtotal)));return{total:h((()=>t.value+parseFloat(e.order.debt)))}}},_t={class:"has-text-centered"},Et={class:"has-text-right"},Ot={class:"has-text-right"},Tt={class:"has-text-centered"};St.render=function(e,t,d,c,u,i){const p=a("router-link");return l(),s("tr",null,[n("td",null,[n(p,{to:{name:"order-detail",params:{id:d.order.id}}},{default:r((()=>[n("span",null,o(d.order.customer_name),1)])),_:1},8,["to"])]),n("td",_t,[n("span",null,o(new Date(d.order.created_at).toLocaleDateString()),1)]),n("td",Et,[n("span",null,o(i.n(c.total,"currency")),1)]),n("td",Ot,[n("span",null,o(i.n(parseFloat(d.order.payment),"currency")),1)]),n("td",Tt,o(i.t(`orders.status.${d.order.status}`)),1)])};const Nt={components:{OrderRow:St},inject:["t"],setup(){const e=i();return{orders:h((()=>e.getters["orders/orders"]))}}},Dt={class:"title is-4 has-text-centered mt-2"},qt={class:"table is-bordered mb-5"},Lt={class:"has-text-centered"},Bt={style:{width:"130px"}},Rt={style:{width:"130px"}};Nt.render=function(e,t,r,d,c,u){const i=a("OrderRow");return l(),s(v,null,[n("h4",Dt,o(u.t("orders.list")),1),n("table",qt,[n("thead",null,[n("tr",Lt,[n("th",null,o(u.t("customers.table.customer")),1),n("th",null,o(u.t("orders.table.date")),1),n("th",Bt,o(u.t("orders.table.total")),1),n("th",Rt,o(u.t("orders.table.payment")),1),n("th",null,o(u.t("orders.table.status")),1)])]),n("tbody",null,[(l(!0),s(v,null,g(d.orders,(e=>(l(),s(i,{key:e.id,order:e},null,8,["order"])))),128))])])],64)};const jt={components:{Units:ze,RequiredInput:he,UnrequiredInput:te,OrderList:Nt},inject:["t","n"],setup(){const e=w(),a=i(),l=t(!1),s=t(""),n=t(""),r=t(""),d=t("");u((async()=>{await a.dispatch("customers/fetchCustomer",e.params.id),await a.dispatch("orders/fetchOrders",{customer:a.getters["customers/customerName"]})}));const o=h((()=>a.getters["customers/customer"]));x(o,(()=>{s.value=o.value.name,n.value=o.value.phone,r.value=o.value.address,d.value=o.value.description}));return{customer:o,isEditing:l,name:s,phone:n,address:r,description:d,save:async()=>{await a.dispatch("customers/editCustomer",{name:s.value,phone:n.value,address:r.value,description:d.value}),l.value=!1},addOrder:()=>{a.dispatch("orders/addOrder",{customer:a.getters["customers/customerId"]})}}}},Ft=b("data-v-01d88e90");p("data-v-01d88e90");const At={class:"title is-3 has-text-centered"},$t={class:"table is-bordered"},Mt={class:"has-text-centered"},Ht={key:1},Kt={class:"has-text-centered"},Gt={key:1},zt={key:1},Qt={key:0,class:"control"},Xt={key:1},Jt={key:0},Wt={class:"has-text-centered"},Yt={key:0,class:"has-text-centered button-group"},Zt={key:1,class:"has-text-centered button-group"};m();const ea=Ft(((e,t,r,d,c,u)=>{var i,p,m,h,g;const b=a("RequiredInput"),f=a("UnrequiredInput"),x=a("OrderList");return l(),s(v,null,[n("h3",At,o(u.t("customers.detailTitle")),1),n("table",$t,[n("tbody",null,[n("tr",null,[n("th",null,o(u.t("customers.table.customer")),1),n("td",Mt,[d.isEditing?(l(),s(b,{key:0,type:"text",modelValue:d.name,"onUpdate:modelValue":t[1]||(t[1]=e=>d.name=e),placeholder:u.t("customers.namePlaceholder")},null,8,["modelValue","placeholder"])):(l(),s("strong",Ht,o(null==(i=d.customer)?void 0:i.name),1))])]),n("tr",null,[n("th",null,o(u.t("customers.table.phone")),1),n("td",Kt,[d.isEditing?(l(),s(f,{key:0,type:"text",modelValue:d.phone,"onUpdate:modelValue":t[2]||(t[2]=e=>d.phone=e),placeholder:u.t("customers.phonePlaceholder")},null,8,["modelValue","placeholder"])):(l(),s("strong",Gt,o(null==(p=d.customer)?void 0:p.phone),1))])]),n("tr",null,[n("th",null,o(u.t("customers.table.address")),1),n("td",null,[d.isEditing?(l(),s(f,{key:0,type:"text",modelValue:d.address,"onUpdate:modelValue":t[3]||(t[3]=e=>d.address=e),placeholder:u.t("customers.addressPlaceholder")},null,8,["modelValue","placeholder"])):(l(),s("span",zt,o(null==(m=d.customer)?void 0:m.address),1))])]),n("tr",null,[n("th",null,o(u.t("customers.description")),1),n("td",null,[d.isEditing?(l(),s("div",Qt,[P(n("textarea",{class:"textarea",placeholder:u.t("customers.descriptionPlaceholder"),"onUpdate:modelValue":t[4]||(t[4]=e=>d.description=e)},null,8,["placeholder"]),[[I,d.description]])])):(l(),s("span",Xt,o(null==(h=d.customer)?void 0:h.description),1))])]),d.isEditing?y("",!0):(l(),s("tr",Jt,[n("th",null,o(u.t("customers.table.debt")),1),n("td",Wt,[n("strong",null,o(u.n(parseFloat((null==(g=d.customer)?void 0:g.debt)||0),"currency")),1)])]))])]),d.isEditing?(l(),s("div",Yt,[n("button",{onClick:t[5]||(t[5]=(...e)=>d.save&&d.save(...e)),disabled:!d.name,class:"button is-info mx-5"},o(u.t("save")),9,["disabled"]),n("button",{onClick:t[6]||(t[6]=e=>d.isEditing=!1),class:"button mx-5"},o(u.t("cancel")),1)])):(l(),s("div",Zt,[n("button",{onClick:t[7]||(t[7]=e=>d.isEditing=!0),class:"button is-info mx-5"},o(u.t("edit")),1),n("button",{onClick:t[8]||(t[8]=(...e)=>d.addOrder&&d.addOrder(...e)),class:"button is-primary mx-5"},o(u.t("orders.addButton")),1)])),n(x)],64)}));jt.render=ea,jt.__scopeId="data-v-01d88e90";const ta={components:{RequiredInput:he,UnrequiredInput:te},inject:["t"],setup(){const e=t(""),a=t(""),l=t(""),s=t(""),n=i();return{name:e,phone:a,address:l,description:s,onSubmit:async()=>{await n.dispatch("customers/addCustomer",{name:e.value,phone:a.value,address:l.value,description:s.value})}}}},aa=b("data-v-23a7d702");p("data-v-23a7d702");const la={class:"title is-4 has-text-centered"},sa={class:"field"},na={class:"label"},ra={class:"control"},da={class:"field is-grouped is-grouped-centered"},oa={class:"control"},ca={class:"control"};m();const ua=aa(((e,t,r,c,u,i)=>{const p=a("RequiredInput"),m=a("UnrequiredInput"),h=a("router-link");return l(),s(v,null,[n("h4",la,o(i.t("customers.addTitle")),1),n("form",{onSubmit:t[5]||(t[5]=V(((...e)=>c.onSubmit&&c.onSubmit(...e)),["prevent"]))},[n(p,{label:i.t("customers.table.customer"),placeholder:i.t("customers.namePlaceholder"),modelValue:c.name,"onUpdate:modelValue":t[1]||(t[1]=e=>c.name=e),type:"text"},null,8,["label","placeholder","modelValue"]),n(m,{type:"text",label:i.t("customers.table.phone"),placeholder:i.t("customers.phonePlaceholder"),modelValue:c.phone,"onUpdate:modelValue":t[2]||(t[2]=e=>c.phone=e)},null,8,["label","placeholder","modelValue"]),n(m,{type:"text",label:i.t("customers.table.address"),placeholder:i.t("customers.addressPlaceholder"),modelValue:c.address,"onUpdate:modelValue":t[3]||(t[3]=e=>c.address=e)},null,8,["label","placeholder","modelValue"]),n("div",sa,[n("label",na,o(i.t("customers.description")),1),n("div",ra,[P(n("textarea",{class:"textarea",placeholder:i.t("customers.descriptionPlaceholder"),"onUpdate:modelValue":t[4]||(t[4]=e=>c.description=e)},null,8,["placeholder"]),[[I,c.description]])])]),n("div",da,[n("div",oa,[n("button",{type:"submit",class:"button is-primary",style:{width:"100px"},disabled:!c.name},o(i.t("add")),9,["disabled"])]),n("div",ca,[n(h,{to:{name:"customers"},class:"button is-link is-light",style:{width:"100px"}},{default:aa((()=>[d(o(i.t("cancel")),1)])),_:1})])])],32)],64)}));ta.render=ua,ta.__scopeId="data-v-23a7d702";var ia=[{path:"/customers",name:"customers",component:Ct},{path:"/customers/add",name:"customer-add",component:ta},{path:"/customers/:id",name:"customer-detail",component:jt}];const pa={components:{ListSearch:re}};pa.render=function(e,t,n,r,d,o){const c=a("ListSearch");return l(),s(c,{placeholder:"orders.searchPlaceholder",actionName:"orders/fetchOrders",paramName:"customer"})};const ma={components:{OrderList:Nt,OrderSearch:pa},inject:["t"],setup(){const e=i();u((()=>{e.dispatch("orders/fetchOrders")}))}},ha={class:"table-page"},va={class:"has-text-right"};ma.render=function(e,t,c,u,i,p){const m=a("router-link"),h=a("OrderSearch"),v=a("OrderList");return l(),s("div",ha,[n("div",va,[n(m,{to:{name:"order-add"},class:"button is-primary is-outlined"},{default:r((()=>[d(o(p.t("orders.addButton")),1)])),_:1})]),n(h),n(v)])};const ga={components:{DebounceInput:ne},props:["label","placeholder","modelValue","getter","action","initial","paramName"],emits:["update:modelValue"],setup(e,a){const l=t(!1),s=t(!1),n=i(),r=t("");x(r,(()=>{n.dispatch(e.action,{[e.paramName]:r.value})})),u((()=>{n.dispatch(e.action),setTimeout((()=>{e.initial&&o(e.initial)}),300)}));const d=h((()=>n.getters[e.getter])),o=e=>{const t=d.value.find((t=>e===t.id||t.name.toLowerCase()===r.value.toLowerCase()));t?(r.value=t.name,l.value=!1,a.emit("update:modelValue",t.id)):(l.value=!0,a.emit("update:modelValue",null))};return{invalid:l,suggestions:d,isFocusing:s,focus:()=>{l.value=!1,s.value=!0},blur:()=>{""===r.value&&(l.value=!0),s.value&&(o(null),s.value=!1)},value:r,click:e=>{o(e),s.value=!1}}}},ba=b("data-v-384c09ee");p("data-v-384c09ee");const ya={class:"suggestion-wrapper"},fa={key:0,class:"suggestions"};m();const xa=ba(((e,t,r,d,c,u)=>{const i=a("debounce-input");return l(),s("div",ya,[n(i,{label:r.label,placeholder:r.placeholder,type:"text",modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),focus:d.focus,blur:d.blur},null,8,["label","placeholder","modelValue","focus","blur"]),d.isFocusing?(l(),s("div",fa,[n("div",null,[(l(!0),s(v,null,g(d.suggestions,(e=>(l(),s("strong",{class:"suggestion",key:e.id,onClick:V((t=>d.click(e.id,e.name)),["stop"])},o(e.name),9,["onClick"])))),128))])])):y("",!0)])}));ga.render=xa,ga.__scopeId="data-v-384c09ee";const ka={props:["title"],emits:["close"],setup:(e,t)=>({close:()=>{t.emit("close")}})},Pa=b("data-v-fd5feb1e");p("data-v-fd5feb1e");const Ia={class:"modal is-active"},Va={class:"modal-content"},Ca={class:"box"},wa={class:"control has-icons-right"},Ua={class:"title is-4 has-text-centered"},Sa=n("i",{class:"fas fa-times-circle"},null,-1),_a=n("hr",{class:"mb-3"},null,-1);m();const Ea=Pa(((e,t,a,r,d,c)=>(l(),s(S,{to:"body"},[n("div",Ia,[n("div",{class:"modal-background",onClick:t[1]||(t[1]=(...e)=>r.close&&r.close(...e))}),n("div",Va,[n("div",Ca,[n("div",wa,[n("h4",Ua,o(a.title),1),n("span",{class:"icon is-small is-right",onClick:t[2]||(t[2]=(...e)=>r.close&&r.close(...e))},[Sa])]),_a,U(e.$slots,"default")])])])]))));ka.render=Ea,ka.__scopeId="data-v-fd5feb1e";const Oa={props:["title","detail"],emits:["save","close"],components:{RequiredInput:he,UnrequiredInput:te,Suggestion:ga,BaseModal:ka,Currency:Ee},inject:["t"],setup(e,a){var l,s,n,r,d;const o=i(),c=t(null==(l=e.detail)?void 0:l.product_id),u=t(null==(s=e.detail)?void 0:s.unit),p=t(null==(n=e.detail)?void 0:n.quantity),m=t((null==(r=e.detail)?void 0:r.price)||0),v=t((null==(d=e.detail)?void 0:d.ready)||!1),g=k("n"),b=h((()=>{if(c.value){const e=o.getters["products/products"].find((e=>e.id===c.value));if(e)return e.units}return[]}));x(b,(()=>{var e,t;1===(null==(e=b.value)?void 0:e.length)?u.value=b.value[0].id:(null==(t=b.value)?void 0:t.length)>1?void 0===b.value.find((e=>e.id===u.value))&&(u.value=0):u.value=0})),x(u,(()=>{var e;if(u.value>0){const t=null==(e=b.value)?void 0:e.find((e=>e.id===u.value));m.value=t?t.price:0}else m.value=0}));const y=h((()=>m.value&&p.value>0?g(m.value*p.value,"currency"):g(0,"currency"))),f=h((()=>!(u.value>0&&p.value>0&&m.value>0)));return{product:c,unit:u,price:m,quantity:p,cost:y,ready:v,isInvalid:f,units:b,save:()=>{a.emit("save",{unit:u.value,quantity:p.value,price:m.value,ready:v.value})},close:()=>{a.emit("close")}}}},Ta=b("data-v-3b717ea6");p("data-v-3b717ea6");const Na={class:"table is-bordered"},Da={style:{"max-width":"330px"}},qa={value:0},La={key:1},Ba={class:"has-text-right pr-5"},Ra={class:"has-text-centered"},ja={class:"field is-grouped is-justify-content-center"},Fa={class:"control"},Aa={class:"control"};m();const $a=Ta(((e,t,r,d,c,u)=>{const i=a("Suggestion"),p=a("Currency"),m=a("RequiredInput"),h=a("BaseModal");return l(),s(h,{title:r.title,onClose:d.close},{default:Ta((()=>[n("form",{onSubmit:t[7]||(t[7]=V(((...e)=>d.save&&d.save(...e)),["prevent"]))},[n("table",Na,[n("tbody",null,[n("tr",null,[n("th",null,o(u.t("products.table.product")),1),n("td",Da,[n(i,{placeholder:u.t("products.namePlaceholder"),action:"products/fetchProducts",getter:"products/products",modelValue:d.product,"onUpdate:modelValue":t[1]||(t[1]=e=>d.product=e),initial:d.product,paramName:"name"},null,8,["placeholder","modelValue","initial"])])]),n("tr",null,[n("th",null,o(u.t("products.table.unit")),1),n("td",null,[d.units.length>1?(l(),s("div",{key:0,class:["select is-success",{"is-danger":0===d.unit}]},[P(n("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>d.unit=e)},[n("option",qa,o(u.t("orders.details.select")),1),(l(!0),s(v,null,g(d.units,(e=>(l(),s("option",{key:e.id,value:e.id},o(e.name),9,["value"])))),128))],512),[[_,d.unit]])],2)):d.units.length>0?(l(),s("span",La,o(d.units[0].name),1)):y("",!0)])]),n("tr",null,[n("th",null,o(u.t("products.table.price")),1),n("td",null,[n(p,{modelValue:d.price,"onUpdate:modelValue":t[3]||(t[3]=e=>d.price=e),placeholder:u.t("units.pricePlaceholder")},null,8,["modelValue","placeholder"])])]),n("tr",null,[n("th",null,o(u.t("orders.details.quantity")),1),n("td",null,[n(m,{type:"number",placeholder:u.t("orders.quantityPlaceholder"),modelValue:d.quantity,"onUpdate:modelValue":t[4]||(t[4]=e=>d.quantity=e)},null,8,["placeholder","modelValue"])])]),n("tr",null,[n("th",null,o(u.t("orders.details.cost")),1),n("td",Ba,o(d.cost),1)]),n("tr",null,[n("th",null,o(u.t("orders.details.ready")),1),n("td",Ra,[P(n("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=e=>d.ready=e)},null,512),[[E,d.ready]])])])])]),n("div",ja,[n("div",Fa,[n("button",{type:"submit",disabled:d.isInvalid,class:"button is-link"},o(u.t("save")),9,["disabled"])]),n("div",Aa,[n("button",{type:"button",onClick:t[6]||(t[6]=V(((...e)=>d.close&&d.close(...e)),["stop"])),class:"button is-link is-light"},o(u.t("cancel")),1)])])],32)])),_:1},8,["title","onClose"])}));Oa.render=$a,Oa.__scopeId="data-v-3b717ea6";const Ma={components:{OrderDetailModal:Oa},props:["detail"],inject:["t","n"],setup(e){const a=t(!1),l=i();return{showEdit:a,toggleEdit:()=>{a.value=!a.value},edit:async t=>{await l.dispatch("orders/editDetail",{id:e.detail.id,payload:t}),a.value=!1}}}},Ha=b("data-v-244c2070");p("data-v-244c2070");const Ka=n("i",{class:"fas fa-check"},null,-1),Ga={class:"has-text-centered"},za={class:"has-text-right hide-on-small"},Qa={class:"has-text-right"},Xa={class:"has-text-right"},Ja={class:"has-text-centered has-text-info"},Wa=n("i",{class:"fas fa-pen"},null,-1);m();const Ya=Ha(((e,t,r,d,c,u)=>{const i=a("OrderDetailModal");return l(),s(v,null,[n("tr",null,[n("td",null,[r.detail.ready?(l(),s("span",{key:0,class:"icon has-text-primary",title:u.t("orders.details.ready")},[Ka],8,["title"])):y("",!0),n("span",null,o(r.detail.product_name),1)]),n("td",Ga,[n("span",null,o(r.detail.unit_name),1)]),n("td",za,o(u.n(parseFloat(r.detail.price||0),"currency")),1),n("td",Qa,o(r.detail.quantity),1),n("td",Xa,o(u.n(r.detail.cost,"currency")),1),n("td",Ja,[n("span",{title:u.t("edit"),onClick:t[1]||(t[1]=(...e)=>d.toggleEdit&&d.toggleEdit(...e)),class:"icon"},[Wa],8,["title"])])]),d.showEdit?(l(),s(i,{key:0,title:u.t("orders.details.editTitle"),detail:r.detail,onClose:d.toggleEdit,onSave:d.edit},null,8,["title","detail","onClose","onSave"])):y("",!0)],64)}));Ma.render=Ya,Ma.__scopeId="data-v-244c2070";const Za={components:{RequiredInput:he,OrderDetail:Ma,OrderDetailModal:Oa},props:["orderId","details"],inject:["t"],setup(a){const l=t(""),s=t(0),n=t(!1),r=i();return{name:l,price:s,showAdd:n,toggleAdd:()=>{n.value=!n.value},click:async()=>{await r.dispatch("products/addOrderDetail",{product:a.productId,name:l.value,price:s.value}),l.value="",s.value=0},addDetail:async t=>{await r.dispatch("orders/addDetail",e({order:a.orderId},t)),n.value=!1}}}},el=b("data-v-00e8d86c");p("data-v-00e8d86c");const tl={class:"title is-5 has-text-centered"},al={class:"table is-bordered"},ll={class:"has-text-centered"},sl={class:"hide-on-small"},nl={style:{width:"50px"}},rl={class:"has-text-centered has-text-primary is-size-2"},dl=n("i",{class:"fas fa-plus-circle"},null,-1);m();const ol=el(((e,t,r,d,c,u)=>{const i=a("OrderDetail"),p=a("OrderDetailModal");return l(),s(v,null,[n("h5",tl,o(u.t("orders.details.title")),1),n("table",al,[n("thead",null,[n("tr",ll,[n("th",null,o(u.t("products.name")),1),n("th",null,o(u.t("products.table.unit")),1),n("th",sl,o(u.t("products.table.price")),1),n("th",null,o(u.t("orders.details.quantity")),1),n("th",null,o(u.t("orders.details.cost")),1),n("th",nl,o(u.t("orders.details.edit")),1)])]),n("tbody",null,[(l(!0),s(v,null,g(r.details,(e=>(l(),s(i,{key:e.id,detail:e},null,8,["detail"])))),128))])]),n("div",rl,[n("span",{onClick:t[1]||(t[1]=(...e)=>d.toggleAdd&&d.toggleAdd(...e)),title:u.t("orders.details.add"),class:"icon"},[dl],8,["title"])]),d.showAdd?(l(),s(p,{key:0,title:u.t("orders.details.add"),onClose:d.toggleAdd,onSave:d.addDetail},null,8,["title","onClose","onSave"])):y("",!0)],64)}));Za.render=ol,Za.__scopeId="data-v-00e8d86c";const cl={emits:["close"],inject:["t"],components:{BaseModal:ka,Currency:Ee},setup(e,a){const l=i(),s=t(0),n=()=>{a.emit("close")};C((()=>{s.value=l.getters["orders/payment"]}));const r=h((()=>!(s.value>=0)));return{save:async()=>{await l.dispatch("orders/editOrder",{payment:s.value}),n()},close:n,payment:s,isInvalid:r}}},ul=b("data-v-559dee14");p("data-v-559dee14");const il={class:"table is-bordered"},pl={class:"field is-grouped is-justify-content-center"},ml={class:"control"},hl={class:"control"};m();const vl=ul(((e,t,r,d,c,u)=>{const i=a("Currency"),p=a("BaseModal");return l(),s(p,{title:u.t("orders.payment.title"),onClose:d.close},{default:ul((()=>[n("form",{onSubmit:t[3]||(t[3]=V(((...e)=>d.save&&d.save(...e)),["prevent"]))},[n("table",il,[n("tbody",null,[n("tr",null,[n("th",null,o(u.t("orders.payment.payment")),1),n("td",null,[n(i,{placeholder:u.t("orders.paymentPlaceholder"),modelValue:d.payment,"onUpdate:modelValue":t[1]||(t[1]=e=>d.payment=e)},null,8,["placeholder","modelValue"])])])])]),n("div",pl,[n("div",ml,[n("button",{type:"submit",disabled:d.isInvalid,class:"button is-link"},o(u.t("save")),9,["disabled"])]),n("div",hl,[n("button",{type:"button",onClick:t[2]||(t[2]=V(((...e)=>d.close&&d.close(...e)),["stop"])),class:"button is-link is-light"},o(u.t("cancel")),1)])])],32)])),_:1},8,["title","onClose"])}));cl.render=vl,cl.__scopeId="data-v-559dee14";const gl={components:{OrderDetails:Za,RequiredInput:he,UnrequiredInput:te,PaymentModal:cl},inject:["t","n"],setup(){const e=w(),a=i(),l=t(!1);u((()=>{a.dispatch("orders/fetchOrder",e.params.id)}));const s=h((()=>a.getters["orders/order"])),n=h((()=>a.getters["orders/customer"])),r=h((()=>a.getters["orders/subtotal"])),d=h((()=>s.value?parseFloat(s.value.debt)+r.value:0)),o=h((()=>s.value?d.value-parseFloat(s.value.payment):0));return{order:s,customer:n,subtotal:r,total:d,remain:o,showPayment:l,togglePayment:()=>{l.value=!l.value}}}},bl=b("data-v-42d6fe93");p("data-v-42d6fe93");const yl={class:"title is-3 has-text-centered"},fl={class:"table is-bordered"},xl={class:"has-text-centered"},kl={class:"has-text-centered"},Pl={class:"has-text-centered"},Il={class:"has-text-centered"},Vl={class:"has-text-centered"},Cl={class:"has-text-centered"},wl={class:"has-text-centered"},Ul={class:"has-text-centered"},Sl={key:0},_l={class:"has-text-centered mb-5 pb-4"};m();const El=bl(((e,t,r,c,u,i)=>{var p,m,h,g,b;const f=a("router-link"),x=a("OrderDetails"),k=a("PaymentModal");return l(),s(v,null,[n("h3",yl,o(i.t("orders.detailTitle")),1),n("table",fl,[n("tbody",null,[n("tr",null,[n("th",null,o(i.t("customers.table.customer")),1),n("td",xl,[n(f,{to:{name:"customer-detail",params:{id:null==(p=c.customer)?void 0:p.id}}},{default:bl((()=>{var e;return[d(o(null==(e=c.customer)?void 0:e.name),1)]})),_:1},8,["to"])])]),n("tr",null,[n("th",null,o(i.t("customers.table.phone")),1),n("td",kl,[n("strong",null,o(null==(m=c.customer)?void 0:m.phone),1)])]),n("tr",null,[n("th",null,o(i.t("customers.table.address")),1),n("td",null,[n("span",null,o(null==(h=c.customer)?void 0:h.address),1)])]),n("tr",null,[n("th",null,o(i.t("customers.table.debt")),1),n("td",Pl,[n("strong",null,o(i.n(parseFloat((null==(g=c.order)?void 0:g.debt)||0),"currency")),1)])]),n("tr",null,[n("th",null,o(i.t("orders.table.subtotal")),1),n("td",Il,[n("strong",null,o(i.n(c.subtotal,"currency")),1)])]),n("tr",null,[n("th",null,o(i.t("orders.table.total")),1),n("td",Vl,[n("strong",null,o(i.n(c.total,"currency")),1)])]),n("tr",null,[n("th",null,o(i.t("orders.table.payment")),1),n("td",Cl,[n("strong",null,o(i.n(parseFloat((null==(b=c.order)?void 0:b.payment)||0),"currency")),1)])]),n("tr",null,[n("th",null,o(i.t("orders.table.remain")),1),n("td",wl,[n("strong",null,o(i.n(c.remain,"currency")),1)])]),n("tr",null,[n("th",null,o(i.t("orders.table.status")),1),n("td",Ul,[c.order?(l(),s("strong",Sl,o(i.t(`orders.status.${c.order.status}`)),1)):y("",!0)])])])]),n("div",_l,[n("button",{onClick:t[1]||(t[1]=(...e)=>c.togglePayment&&c.togglePayment(...e)),class:"button is-primary is-outlined"},o(i.t("orders.pay")),1)]),c.order?(l(),s(x,{key:0,orderId:c.order.id,details:c.order.details},null,8,["orderId","details"])):y("",!0),c.showPayment?(l(),s(k,{key:1,onClose:c.togglePayment},null,8,["onClose"])):y("",!0)],64)}));gl.render=El,gl.__scopeId="data-v-42d6fe93";const Ol={components:{Suggestion:ga},inject:["t"],setup(){const e=w(),a=i(),l=t(null),s=h((()=>{const t=parseInt(e.query.customer);return isNaN(t)?null:t}));return{submit:()=>{l.value&&a.dispatch("orders/addOrder",{customer:l.value})},customer:l,initial:s}}},Tl=b("data-v-ff59d0c8");p("data-v-ff59d0c8");const Nl={class:"title is-4 has-text-centered"},Dl={class:"has-text-centered mt-5 pt-3"};m();const ql=Tl(((e,t,r,d,c,u)=>{const i=a("Suggestion");return l(),s(v,null,[n("h4",Nl,o(u.t("orders.addButton")),1),n("form",{onSubmit:t[2]||(t[2]=V(((...e)=>d.submit&&d.submit(...e)),["prevent"]))},[n(i,{action:"customers/fetchCustomers",getter:"customers/customers",initial:d.initial,modelValue:d.customer,"onUpdate:modelValue":t[1]||(t[1]=e=>d.customer=e),placeholder:u.t("customers.namePlaceholder"),label:u.t("customers.table.customer"),paramName:"name"},null,8,["initial","modelValue","placeholder","label"]),n("div",Dl,[n("button",{disabled:!d.customer,type:"submit",class:"button is-primary is-outlined"},o(u.t("orders.addButton")),9,["disabled"])])],32)],64)}));Ol.render=ql,Ol.__scopeId="data-v-ff59d0c8";var Ll=[{path:"/orders",name:"orders",component:ma},{path:"/orders/add",name:"order-add",component:Ol},{path:"/orders/:id",name:"order-detail",component:gl}];const Bl={inject:["t"],setup(){const e=i();return{language:h((()=>e.getters.language)),change:t=>{e.dispatch("changeLanguage",t.target.value)}}}},Rl=b("data-v-306df169");p("data-v-306df169");const jl={class:"title is-3 has-text-centered"},Fl={class:"language"},Al={class:"select"},$l=n("option",{value:"en"},"English",-1),Ml=n("option",{value:"vi"},"Tiếng Việt",-1);m();const Hl=Rl(((e,t,a,r,d,c)=>(l(),s(v,null,[n("h3",jl,o(c.t("settings.title")),1),n("div",Fl,[n("p",null,[n("strong",null,o(c.t("settings.selectLanguage")),1)]),n("div",Al,[n("select",{value:r.language,onChange:t[1]||(t[1]=(...e)=>r.change&&r.change(...e))},[$l,Ml],40,["value"])])])],64))));Bl.render=Hl,Bl.__scopeId="data-v-306df169";const Kl=[];Kl.push(...it),Kl.push(...ia),Kl.push(...Ll),Kl.push({path:"/settings",name:"settings",component:Bl});const Gl=O({history:T(),routes:Kl});var zl={products:e=>e.products,product:e=>e.product,productId(e){var t;return null==(t=e.product)?void 0:t.id}},Ql={fetchProducts(e,t){e.products=t},fetchProduct(e,t){e.product=t},activateProduct(e){e.product.active=!0},deactivateProduct(e){e.product.active=!1},editProduct(t,{name:a,description:l}){t.product=e(e({},t.product),{name:a,description:l})},addUnit(e,t){e.product.units.push(t)},activateUnit(e,t){e.product.units.forEach((e=>{t===e.id&&(e.active=!0)}))},deactivateUnit(e,t){e.product.units.forEach((e=>{t===e.id&&(e.active=!1)}))},editUnit(t,{unitId:a,payload:l}){t.product.units=t.product.units.map((t=>a===t.id?e(e({},t),l):t))}};const Xl=N.create({baseURL:"http://192.168.1.11:8000/api/"});class Jl{constructor(e){this.BASE_ENDPOINT=e}fetchAll(e={}){return Xl.get(`${this.BASE_ENDPOINT}/`,{params:e})}fetchOneById(e){return Xl.get(`${this.BASE_ENDPOINT}/${e}/`)}add(e){return Xl.post(`${this.BASE_ENDPOINT}/`,e)}updateById(e,t){return Xl.patch(`${this.BASE_ENDPOINT}/${e}/`,t)}}var Wl={products:new class extends Jl{activateProduct(e){return Xl.patch(`products/${e}/`,{active:!0})}deactivateProduct(e){return Xl.patch(`products/${e}/`,{active:!1})}addUnit(e){return Xl.post("units/",e)}updateUnitById(e,t){return Xl.patch(`units/${e}/`,t)}activateUnit(e){return Xl.patch(`units/${e}/`,{active:!0})}deactivateUnit(e){return Xl.patch(`units/${e}/`,{active:!1})}}("products"),customers:new Jl("customers"),orders:new Jl("orders"),orderDetails:new Jl("orders/details")},Yl={namespaced:!0,state:()=>({products:[],product:null}),getters:zl,mutations:Ql,actions:{async fetchProducts({commit:e},t={}){e("fetchProducts",(await Wl.products.fetchAll(t)).data)},async fetchProduct({commit:e},t){e("fetchProduct",(await Wl.products.fetchOneById(t)).data)},async addProduct(e,t){const a=await Wl.products.add(t);Gl.push(`/products/${a.data.id}`)},async editProduct({commit:e,getters:t},a){await Wl.products.updateProductById(t.productId,a),e("editProduct",a)},async activateProduct({commit:e,getters:t}){await Wl.products.activateProduct(t.productId),e("activateProduct")},async deactivateProduct({commit:e,getters:t}){await Wl.products.deactivateProduct(t.productId),e("deactivateProduct")},async addUnit({commit:e},t){e("addUnit",(await Wl.products.addUnit(t)).data)},async editUnit({commit:e},{unitId:t,payload:a}){await Wl.products.updateUnitById(t,a),e("editUnit",{unitId:t,payload:a})},async activateUnit({commit:e},t){await Wl.products.activateUnit(t),e("activateUnit",t)},async deactivateUnit({commit:e},t){await Wl.products.deactivateUnit(t),e("deactivateUnit",t)}}},Zl={namespaced:!0,state:()=>({customers:[],customer:null}),getters:{customers:e=>e.customers,customer:e=>e.customer,customerName(e){var t,a;return null!=(a=null==(t=e.customer)?void 0:t.name)?a:""},customerId(e){var t;return null==(t=e.customer)?void 0:t.id}},mutations:{fetchCustomers(e,t){e.customers=t},fetchCustomer(e,t){e.customer=t},editCustomer(t,a){t.customer=e(e({},t.customer),a)}},actions:{async fetchCustomers({commit:e},t={}){e("fetchCustomers",(await Wl.customers.fetchAll(t)).data)},async fetchCustomer({commit:e},t){e("fetchCustomer",(await Wl.customers.fetchOneById(t)).data)},async addCustomer(e,t){const a=await Wl.customers.add(t);Gl.push({name:"customer-detail",params:{id:a.data.id}})},async editCustomer({commit:e,getters:t},a){await Wl.customers.updateById(t.customerId,a),e("editCustomer",a)}}},es={namespaced:!0,state:()=>({orders:[],order:null,customer:null}),getters:{orders:e=>e.orders,order:e=>e.order,orderId(e){var t;return null==(t=e.order)?void 0:t.id},customer:e=>e.customer,subtotal(e){var t;return(null==(t=e.order)?void 0:t.details.reduce(((e,t)=>e+parseFloat(t.cost)),0))||0},payment(e){var t;return(null==(t=e.order)?void 0:t.payment)||0}},mutations:{fetchOrders(e,t){e.orders=t},fetchOrder(e,t){e.order=t},editOrder(t,a){t.order=e(e({},t.order),a)},fetchOrderCusomer(e,t){e.customer=t},addDetail(e,t){e.order.details.push(t)},editDetail(e,{id:t,detail:a}){e.order.details=e.order.details.map((e=>e.id===t?a:e))}},actions:{async fetchOrders({commit:e},t={}){e("fetchOrders",(await Wl.orders.fetchAll(t)).data)},async fetchOrder({commit:e},t){const a=await Wl.orders.fetchOneById(t);e("fetchOrder",a.data);e("fetchOrderCusomer",(await Wl.customers.fetchOneById(a.data.customer)).data)},async addOrder(e,t){const a=await Wl.orders.add(t);Gl.push({name:"order-detail",params:{id:a.data.id}})},async editOrder({commit:e,getters:t},a){await Wl.orders.updateById(t.orderId,a),e("editOrder",a)},async addDetail({commit:e},t){e("addDetail",(await Wl.orderDetails.add(t)).data)},async editDetail({commit:e},{id:t,payload:a}){e("editDetail",{id:t,detail:(await Wl.orderDetails.updateById(t,a)).data})}}};const ts=D({locale:"en",messages:{en:{navbar:{products:"Products",customers:"Customers",orders:"Orders",settings:"Settings"},products:{list:"Product List",table:{product:"Product",unit:"Measurement Unit",price:"Price"},addButton:"Add Product",name:"Name",namePlaceholder:"Enter product name",description:"Description",descriptionPlaceholder:"Enter product description",addTitle:"Add Product",detailTitle:"Product",searchPlaceholder:"Enter name to search for products"},units:{title:"Units",name:"Name",namePlaceholder:"Enter unit name",price:"Price",pricePlaceholder:"Enter price",action:"Action"},customers:{searchPlaceholder:"Enter name to search for customers",list:"Customer List",addButton:"Add Customer",table:{customer:"Customer",phone:"Phone",address:"Address",debt:"Debt"},detailTitle:"Customer",description:"Description",namePlaceholder:"Enter customer name",phonePlaceholder:"Enter customer phone number",addressPlaceholder:"Enter customer address",descriptionPlaceholder:"Enter customer description",addTitle:"Add Customer"},orders:{searchPlaceholder:"Enter customer name to search for orders",list:"Order List",addButton:"Add Order",table:{date:"Date",subtotal:"Subtotal",total:"Total",payment:"Payment",remain:"Remain",status:"Status"},status:{o:"Ordered",p:"Preparing",r:"Ready",s:"Shipped"},detailTitle:"Order",details:{title:"Order Details",quantity:"Quantity",cost:"Cost",ready:"Ready",add:"Add Order Detail",edit:"Edit",editTitle:"Edit Order Detail",select:"Select Measurement Unit"},quantityPlaceholder:"Enter quantity",pay:"Pay",paymentPlaceholder:"Enter payment",payment:{title:"Payment",payment:"Payment"}},settings:{title:"Settings",selectLanguage:"Select your language"},add:"Add",save:"Save",cancel:"Cancel",recover:"Recover",edit:"Edit",delete:"Delete",search:"Search"},vi:{navbar:{products:"Hàng Hóa",customers:"Khách Hàng",orders:"Đơn Hàng",settings:"Cài Đặt"},products:{list:"Danh sách các mặt hàng",table:{product:"Tên hàng",unit:"Đơn vị tính",price:"Giá tiền"},addButton:"Thêm mặt hàng",name:"Tên hàng",namePlaceholder:"Nhập tên hàng",description:"Thông tin mặt hàng",descriptionPlaceholder:"Nhập thông tin về mặt hàng",addTitle:"Thêm Mặt Hàng",detailTitle:"Thông tin hàng",searchPlaceholder:"Nhập tên để tìm kiếm hàng"},units:{title:"Đơn vị tính",name:"Đơn vị",namePlaceholder:"Nhập đơn vị",price:"Giá tiền",pricePlaceholder:"Nhập giá tiền",action:""},customers:{searchPlaceholder:"Nhập tên để tìm kiếm khách hàng",list:"Danh sách khách hàng",addButton:"Thêm Khách Hàng",table:{customer:"Tên Khách Hàng",phone:"S.Đ.T.",address:"Địa Chỉ",debt:"Nợ Cũ"},detailTitle:"Khách Hàng",description:"Thông Tin Khách Hàng",namePlaceholder:"Nhập tên khách hàng",phonePlaceholder:"Nhập số  điện thoại của khách hàng",addressPlaceholder:"Nhập địa chỉ của khách hàng",descriptionPlaceholder:"Nhập thông tin khách hàng",addTitle:"Thêm Khách Hàng"},orders:{searchPlaceholder:"Nhập tên khách hàng để tìm kiếm đơn hàng",list:"Danh sách đơn hàng",addButton:"Thêm Đơn Hàng",table:{date:"Ngày",subtotal:"Tổng tiền hàng",total:"Tổng tiền",payment:"Đã thanh toán",remain:"Còn thiếu",status:"Trạng Thái"},status:{o:"Chưa soạn",p:"Đang soạn",r:"Soạn xong",s:"Đã chở"},detailTitle:"Đơn Hàng",details:{title:"Thông Tin Đơn Hàng",quantity:"Số Lượng",cost:"Thành Tiền",ready:"Đã Soạn",add:"Thêm Mặt Hàng",edit:"",editTitle:"Chỉnh Sửa Thông Tin Hàng",select:"Chọn Đơn Vị Tính"},quantityPlaceholder:"Nhập số lượng hàng",pay:"Thanh toán",paymentPlaceholder:"Nhập số tiền đã thanh toán",payment:{title:"Thanh Toán",payment:"Số tiền đã thanh toán"}},settings:{title:"Cài Đặt",selectLanguage:"Lựa chọn ngôn ngữ"},add:"Thêm",save:"Lưu",cancel:"Hủy",recover:"Phục hồi",edit:"Chỉnh sửa",delete:"Xóa",search:"Tìm kiếm"}},numberFormats:{en:{currency:{style:"currency",currency:"USD"}},vi:{currency:{style:"currency",currency:"VND"}}}});var as=q({modules:{products:Yl,customers:Zl,orders:es},state:{language:localStorage.getItem("language")||"vi"},getters:{language:e=>e.language},mutations:{changeLanguage(e,t){localStorage.setItem("language",t),e.language=t,ts.global.locale=t}},actions:{changeLanguage({commit:e},t){e("changeLanguage",t)},setLanguage({getters:e}){ts.global.locale=e.language}}});const ls=L(H);ls.use(Gl),ls.use(as),ls.use(ts),ls.mount("#app");
