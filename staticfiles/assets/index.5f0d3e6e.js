var e=Object.assign;import{r as t,a,o as l,c as s,b as n,w as r,d,t as o,u as c,e as u,f as i,p,g as m,h,F as v,i as b,j as g,k as y,l as f,m as x,n as k,q as P,v as I,s as V,x as w,y as C,z as U,T as S,A as _,B as E,C as O,D as T,E as N,G as D,H as q,I as L}from"./vendor.9c11db83.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const l=new URL(e,location),s=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,n)=>{const r=new URL(e,l);if(self[t].moduleMap[r])return a(self[t].moduleMap[r]);const d=new Blob([`import * as m from '${r}';`,`${t}.moduleMap['${r}']=m;`],{type:"text/javascript"}),o=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(d),onerror(){n(new Error(`Failed to import: ${e}`)),s(o)},onload(){a(self[t].moduleMap[r]),s(o)}});document.head.appendChild(o)})),self[t].moduleMap={}}}("/assets/");const B={inject:["t"],setup(){const e=t(!1);return{show:e,toggleShow:()=>{e.value=!e.value}}}},R={class:"navbar",role:"navigation","aria-label":"main navigation"},j={class:"navbar-brand"},F=n("span",{"aria-hidden":"true"},null,-1),A=n("span",{"aria-hidden":"true"},null,-1),$=n("span",{"aria-hidden":"true"},null,-1),M={class:"navbar-start"};B.render=function(e,t,c,u,i,p){const m=a("router-link");return l(),s("nav",R,[n("div",j,[n("a",{role:"button",class:["navbar-burger",{"is-active":u.show}],"aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",onClick:t[1]||(t[1]=(...e)=>u.toggleShow&&u.toggleShow(...e))},[F,A,$],2)]),n("div",{id:"navbarBasicExample",class:["navbar-menu",{"is-active":u.show}]},[n("div",M,[n(m,{to:{name:"products"},class:"navbar-item"},{default:r((()=>[d(o(p.t("navbar.products")),1)])),_:1}),n(m,{to:{name:"customers"},class:"navbar-item"},{default:r((()=>[d(o(p.t("navbar.customers")),1)])),_:1}),n(m,{to:{name:"orders"},class:"navbar-item"},{default:r((()=>[d(o(p.t("navbar.orders")),1)])),_:1}),n(m,{to:{name:"settings"},class:"navbar-item"},{default:r((()=>[d(o(p.t("navbar.settings")),1)])),_:1})])],2)])};const H={components:{Navbar:B},provide(){return{t:this.t,n:this.n}},setup(){const{t:e,n:t}=c(),a=i();return u((()=>{a.dispatch("setLanguage")})),{t:e,n:t}}},K={class:"container"};H.render=function(e,t,r,d,o,c){const u=a("Navbar"),i=a("router-view");return l(),s("div",K,[n(u),n(i)])};const G={props:["product"],inject:["n"],setup:e=>({firstUnit:h((()=>e.product.active?e.product.units[0]:void 0)),otherUnits:h((()=>e.product.active?e.product.units.slice(1):[])),rowSpan:h((()=>e.product.active?Math.max(e.product.units.length,1):1)),toLink:h((()=>({name:"product-detail",params:{id:e.product.id}})))})},z=g("data-v-088108ed");p("data-v-088108ed");const X={class:"has-text-right"},Q={class:"has-text-right"};m();const J=z(((e,t,r,c,u,i)=>{var p;const m=a("router-link");return l(),s(v,null,[n("tr",null,[n("td",{rowspan:c.rowSpan,class:"product-name"},[n(m,{to:c.toLink,class:{deleted:!r.product.active}},{default:z((()=>[d(o(r.product.name),1)])),_:1},8,["to","class"])],8,["rowspan"]),n("td",null,o((null==(p=c.firstUnit)?void 0:p.name)||""),1),n("td",X,o(c.firstUnit?i.n(parseFloat(c.firstUnit.price),"currency"):""),1)]),(l(!0),s(v,null,b(c.otherUnits,(e=>(l(),s("tr",{key:e.id},[n("td",null,o(e.name),1),n("td",Q,o(i.n(parseFloat(e.price),"currency")),1)])))),128))],64)}));G.render=J,G.__scopeId="data-v-088108ed";const W={components:{ProductRow:G},inject:["t"],setup(){const e=i();u((()=>{e.dispatch("products/fetchProducts")}));return{products:h((()=>e.getters["products/products"]))}}},Y={class:"title is-4 has-text-centered mt-2"},Z={class:"table is-bordered mb-5"},ee={class:"has-text-centered"};W.render=function(e,t,r,d,c,u){const i=a("ProductRow");return l(),s(v,null,[n("h4",Y,o(u.t("products.list")),1),n("table",Z,[n("thead",null,[n("tr",ee,[n("th",null,o(u.t("products.table.product")),1),n("th",null,o(u.t("products.table.unit")),1),n("th",null,o(u.t("products.table.price")),1)])]),n("tbody",null,[(l(!0),s(v,null,b(d.products,(e=>(l(),s(i,{key:e.id,product:e},null,8,["product"])))),128))])])],64)};const te={props:{type:{type:String,default:"text"},icon:{type:String,default:""},placeholder:{type:String,default:""},modelValue:{required:!0},label:{type:String,default:""},blur:{type:Function,default:()=>{}},focus:{type:Function,default:()=>{}},readonly:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,a){const l=t(null);return{handleInput:e=>{a.emit("update:modelValue",e.target.value)},blur_:()=>{setTimeout(e.blur,200)},enter:()=>{l.value.blur()},inputRef:l}}},ae={class:"field"},le={key:0,class:"label"},se={key:0,class:"icon is-small is-left"};te.render=function(e,t,a,r,d,c){return l(),s("div",ae,[a.label?(l(),s("label",le,o(a.label),1)):y("",!0),n("div",{class:["control",{"has-icons-left":!!a.icon}]},[n("input",{ref:"inputRef",class:["input",{"has-text-right":"number"===a.type}],type:a.type,placeholder:a.placeholder,value:a.modelValue,onInput:t[1]||(t[1]=(...e)=>r.handleInput&&r.handleInput(...e)),onBlur:t[2]||(t[2]=(...e)=>r.blur_&&r.blur_(...e)),onFocus:t[3]||(t[3]=(...e)=>a.focus&&a.focus(...e)),onKeypress:t[4]||(t[4]=f(((...e)=>r.enter&&r.enter(...e)),["enter"])),readonly:a.readonly},null,42,["type","placeholder","value","readonly"]),a.icon?(l(),s("span",se,[n("i",{class:`fas ${a.icon}`},null,2)])):y("",!0)],2)])};const ne={components:{UnrequiredInput:te},props:["type","icon","placeholder","modelValue","label","time","blur","focus"],emits:["update:modelValue"],setup(e,a){let l=null;const s=t(e.modelValue);return x(e,(()=>{e.modelValue!==s.value&&(s.value=e.modelValue)})),x(s,(()=>{l&&clearTimeout(l),l=setTimeout((()=>{a.emit("update:modelValue",s.value)}),e.time||400)})),{value:s}}};ne.render=function(e,t,n,r,d,o){const c=a("UnrequiredInput");return l(),s(c,{type:n.type,icon:n.icon,placeholder:n.placeholder,label:n.label,modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=e=>r.value=e),blur:n.blur,focus:n.focus},null,8,["type","icon","placeholder","label","modelValue","blur","focus"])};const re={components:{DebounceInput:ne},props:{label:{type:String,default:"search"},placeholder:{type:String,default:""},actionName:{type:String,default:""},paramName:{type:String,default:"name"}},setup(e){const a=t(""),l=i(),s=k("t");x(a,(()=>{""!==e.actionName&&l.dispatch(e.actionName,{[e.paramName]:a.value})}));const n=h((()=>""!==e.label?s(e.label):"")),r=h((()=>""!==e.placeholder?s(e.placeholder):""));return{searchName:a,label:n,placeholder:r}}},de=g("data-v-2d748c2f");p("data-v-2d748c2f");const oe={class:"list-search"};m();const ce=de(((e,t,r,d,o,c)=>{const u=a("DebounceInput");return l(),s("div",oe,[n(u,{type:"text",modelValue:d.searchName,"onUpdate:modelValue":t[1]||(t[1]=e=>d.searchName=e),label:d.label,placeholder:d.placeholder},null,8,["modelValue","label","placeholder"])])}));re.render=ce,re.__scopeId="data-v-2d748c2f";const ue={components:{ListSearch:re}};ue.render=function(e,t,n,r,d,o){const c=a("ListSearch");return l(),s(c,{placeholder:"products.searchPlaceholder",actionName:"products/fetchProducts"})};const ie={components:{ProductList:W,ProductSearch:ue},inject:["t"]},pe={class:"table-page"},me={class:"has-text-right"};ie.render=function(e,t,c,u,i,p){const m=a("router-link"),h=a("ProductSearch"),v=a("ProductList");return l(),s("div",pe,[n("div",me,[n(m,{to:{name:"product-add"},class:"button is-info is-outlined"},{default:r((()=>[d(o(p.t("products.addButton")),1)])),_:1})]),n(h),n(v)])};const he={props:["type","icon","placeholder","modelValue","validate","label"],emits:["update:modelValue"],setup(e,a){const l=t(!1);return{invalid:l,handleInput:e=>{a.emit("update:modelValue",e.target.value)},validateInput:()=>{e.validate&&(l.value=e.validate(e.modelValue)),""===e.modelValue&&(l.value=!0)}}}},ve={class:"field"},be={key:0,class:"label"},ge={key:0,class:"icon is-small is-left"},ye={key:1,class:"icon is-small is-right has-text-danger"},fe=n("i",{class:"fas fa-exclamation-circle"},null,-1);he.render=function(e,t,a,r,d,c){return l(),s("div",ve,[a.label?(l(),s("label",be,o(a.label),1)):y("",!0),n("div",{class:["control",{"has-icons-left":!!a.icon,"has-icons-right":r.invalid}]},[n("input",{class:["input",{"is-danger":r.invalid,"has-text-right":"number"===a.type}],type:a.type,placeholder:a.placeholder,value:a.modelValue,onInput:t[1]||(t[1]=(...e)=>r.handleInput&&r.handleInput(...e)),onBlur:t[2]||(t[2]=(...e)=>r.validateInput&&r.validateInput(...e)),onFocus:t[3]||(t[3]=e=>r.invalid=!1),required:""},null,42,["type","placeholder","value"]),a.icon?(l(),s("span",ge,[n("i",{class:`fas ${a.icon}`},null,2)])):y("",!0),r.invalid?(l(),s("span",ye,[fe])):y("",!0)],2)])};const xe={components:{RequiredInput:he},inject:["t"],setup(){const e=t(""),a=t(""),l=i();return{name:e,description:a,onSubmit:async()=>{await l.dispatch("products/addProduct",{name:e.value,description:a.value})}}}},ke=g("data-v-355f2a5b");p("data-v-355f2a5b");const Pe={class:"title is-4 has-text-centered"},Ie={class:"field"},Ve={class:"label"},we={class:"control"},Ce={class:"field is-grouped is-grouped-centered"},Ue={class:"control"},Se={class:"control"};m();const _e=ke(((e,t,r,c,u,i)=>{const p=a("RequiredInput"),m=a("router-link");return l(),s(v,null,[n("h4",Pe,o(i.t("products.addTitle")),1),n("form",{onSubmit:t[3]||(t[3]=V(((...e)=>c.onSubmit&&c.onSubmit(...e)),["prevent"]))},[n(p,{label:i.t("products.name"),placeholder:i.t("products.namePlaceholder"),modelValue:c.name,"onUpdate:modelValue":t[1]||(t[1]=e=>c.name=e),type:"text"},null,8,["label","placeholder","modelValue"]),n("div",Ie,[n("label",Ve,o(i.t("products.description")),1),n("div",we,[P(n("textarea",{class:"textarea",placeholder:i.t("products.descriptionPlaceholder"),"onUpdate:modelValue":t[2]||(t[2]=e=>c.description=e)},null,8,["placeholder"]),[[I,c.description]])])]),n("div",Ce,[n("div",Ue,[n("button",{type:"submit",class:"button is-info",style:{width:"100px"},disabled:!c.name},o(i.t("add")),9,["disabled"])]),n("div",Se,[n(m,{to:{name:"products"},class:"button is-link is-light",style:{width:"100px"}},{default:ke((()=>[d(o(i.t("cancel")),1)])),_:1})])])],32)],64)}));xe.render=_e,xe.__scopeId="data-v-355f2a5b";const Ee={props:["placeholder","modelValue","label"],emits:["update:modelValue"],setup(e,a){const{n:l,locale:s}=c(),n=t(null);w((()=>{n.value.value=l(parseFloat(e.modelValue||0),"currency")})),x(e,(()=>{const t=n.value.value.length,a=n.value.selectionStart,s=l(parseFloat(e.modelValue),"currency"),r=a+s.length-t;n.value.value=s,n.value.setSelectionRange(r,r)}));return{handleInput:e=>{let t=e.target.value;"vi"===s.value&&(t=t.replace(/\./g,""),t=t.replace(/,/g,".")),t=t.replace(/,/g,""),t=t.replace(/[^\d.]/g,""),a.emit("update:modelValue",t)},inputRef:n}}},Oe={class:"field"},Te={key:0,class:"label"},Ne={class:"control"};Ee.render=function(e,t,a,r,d,c){return l(),s("div",Oe,[a.label?(l(),s("label",Te,o(a.label),1)):y("",!0),n("div",Ne,[n("input",{ref:"inputRef",class:"input has-text-right",type:"text",placeholder:a.placeholder,onInput:t[1]||(t[1]=(...e)=>r.handleInput&&r.handleInput(...e)),required:""},null,40,["placeholder"])])])};const De={components:{RequiredInput:he,Currency:Ee},props:["unit"],inject:["t","n"],setup(e){const a=t(!1),l=t(e.unit.name),s=t(e.unit.price),n=i();return{isEditing:a,name:l,price:s,deactivate:()=>{n.dispatch("products/deactivateUnit",e.unit.id)},activate:()=>{n.dispatch("products/activateUnit",e.unit.id)},save:async()=>{l.value&&s.value&&(await n.dispatch("products/editUnit",{unitId:e.unit.id,payload:{name:l.value,price:s.value}}),a.value=!1)}}}},qe=g("data-v-23aee3a9");p("data-v-23aee3a9");const Le={class:"has-text-right"},Be={key:0,class:"v-align has-text-centered"},Re={key:1,class:"has-text-centered"},je={key:2,colspan:"2",class:"has-text-centered"},Fe={key:3,class:"v-align"},Ae={key:4};m();const $e=qe(((e,t,r,d,c,u)=>{const i=a("RequiredInput"),p=a("Currency");return l(),s("tr",null,[n("td",null,[d.isEditing?(l(),s(i,{key:0,type:"text",modelValue:d.name,"onUpdate:modelValue":t[1]||(t[1]=e=>d.name=e),placeholder:u.t("units.namePlaceholder")},null,8,["modelValue","placeholder"])):(l(),s("span",{key:1,class:{deleted:!r.unit.active}},o(r.unit.name),3))]),n("td",Le,[d.isEditing?(l(),s(p,{key:0,modelValue:d.price,"onUpdate:modelValue":t[2]||(t[2]=e=>d.price=e),placeholder:u.t("units.pricePlaceholder")},null,8,["modelValue","placeholder"])):(l(),s("span",{key:1,class:{deleted:!r.unit.active}},o(u.n(parseFloat(r.unit.price),"currency")),3))]),d.isEditing?(l(),s("td",Be,[n("button",{class:"button is-small is-info has-text-weight-medium",onClick:t[3]||(t[3]=(...e)=>d.save&&d.save(...e)),title:u.t("save")},"Lưu",8,["title"])])):r.unit.active?(l(),s("td",Re,[n("button",{class:"button is-small is-info has-text-weight-medium",onClick:t[4]||(t[4]=e=>d.isEditing=!0),title:u.t("edit")},"Sửa",8,["title"])])):(l(),s("td",je,[n("span",{onClick:t[5]||(t[5]=(...e)=>d.activate&&d.activate(...e)),class:"button is-small is-primary has-text-black has-text-weight-medium",title:u.t("recover")},"Phục hồi",8,["title"])])),d.isEditing?(l(),s("td",Fe,[n("button",{onClick:t[6]||(t[6]=e=>d.isEditing=!1),class:"button is-small is-dark has-text-weight-medium",title:u.t("cancel")},"Hủy",8,["title"])])):r.unit.active?(l(),s("td",Ae,[n("button",{onClick:t[7]||(t[7]=(...e)=>d.deactivate&&d.deactivate(...e)),class:"button is-small is-danger has-text-weight-medium",title:u.t("delete")},"Xóa",8,["title"])])):y("",!0)])}));De.render=$e,De.__scopeId="data-v-23aee3a9";const Me={components:{RequiredInput:he,Unit:De,Currency:Ee},props:["productId","units"],inject:["t"],setup(e){const a=t(""),l=t(0),s=i();return{name:a,price:l,click:async()=>{await s.dispatch("products/addUnit",{product:e.productId,name:a.value,price:l.value}),a.value="",l.value=0}}}},He=g("data-v-35867556");p("data-v-35867556");const Ke={class:"title is-5 has-text-centered"},Ge={class:"table is-bordered"},ze={class:"has-text-centered"},Xe={colspan:"2"},Qe={colspan:"2",class:"has-text-centered"};m();const Je=He(((e,t,r,d,c,u)=>{const i=a("Unit"),p=a("RequiredInput"),m=a("Currency");return l(),s(v,null,[n("h5",Ke,o(u.t("units.title")),1),n("table",Ge,[n("thead",null,[n("tr",ze,[n("th",null,o(u.t("units.name")),1),n("th",null,o(u.t("units.price")),1),n("th",Xe,o(u.t("units.action")),1)])]),n("tbody",null,[(l(!0),s(v,null,b(r.units,(e=>(l(),s(i,{key:e.id,unit:e},null,8,["unit"])))),128)),n("tr",null,[n("td",null,[n(p,{type:"text",placeholder:u.t("units.namePlaceholder"),modelValue:d.name,"onUpdate:modelValue":t[1]||(t[1]=e=>d.name=e)},null,8,["placeholder","modelValue"])]),n("td",null,[n(m,{modelValue:d.price,"onUpdate:modelValue":t[2]||(t[2]=e=>d.price=e),placeholder:u.t("units.pricePlaceholder")},null,8,["modelValue","placeholder"])]),n("td",Qe,[n("button",{disabled:!d.name||!d.price,onClick:t[3]||(t[3]=(...e)=>d.click&&d.click(...e)),class:"button is-info"},o(u.t("add")),9,["disabled"])])])])])],64)}));Me.render=Je,Me.__scopeId="data-v-35867556";const We={components:{Units:Me,RequiredInput:he},inject:["t"],setup(){const e=C(),a=i(),l=t(!1),s=t(""),n=t("");u((()=>{a.dispatch("products/fetchProduct",e.params.id)}));const r=h((()=>a.getters["products/product"]));x(r,(()=>{s.value=r.value.name,n.value=r.value.description}));const d=h((()=>{var e;return(null==(e=r.value)?void 0:e.active)?"":"deleted"}));return{product:r,isEditing:l,name:s,description:n,save:async()=>{s.value&&(await a.dispatch("products/editProduct",{name:s.value,description:n.value}),l.value=!1)},activate:async()=>{await a.dispatch("products/activateProduct")},deactivate:async()=>{await a.dispatch("products/deactivateProduct")},deleted:d}}},Ye=g("data-v-160ee60c");p("data-v-160ee60c");const Ze={class:"title is-3 has-text-centered"},et={class:"table is-bordered"},tt={class:"has-text-centered"},at={key:0,class:"control"},lt={key:0,class:"has-text-centered button-group"},st={key:1,class:"has-text-centered button-group"},nt={key:2,class:"has-text-centered button-group"};m();const rt=Ye(((e,t,r,d,c,u)=>{var i,p,m,h,b,g;const f=a("RequiredInput"),x=a("Units");return l(),s(v,null,[n("h3",Ze,o(u.t("products.detailTitle")),1),n("table",et,[n("tbody",null,[n("tr",null,[n("th",null,o(u.t("products.name")),1),n("td",tt,[d.isEditing?(l(),s(f,{key:0,type:"text",modelValue:d.name,"onUpdate:modelValue":t[1]||(t[1]=e=>d.name=e),placeholder:u.t("products.namePlaceholder")},null,8,["modelValue","placeholder"])):(l(),s("strong",{key:1,class:d.deleted},o(null==(i=d.product)?void 0:i.name),3))])]),n("tr",null,[n("th",null,o(u.t("products.description")),1),n("td",null,[d.isEditing?(l(),s("div",at,[P(n("textarea",{class:"textarea",placeholder:u.t("products.descriptionPlaceholder"),"onUpdate:modelValue":t[2]||(t[2]=e=>d.description=e)},null,8,["placeholder"]),[[I,d.description]])])):(l(),s("span",{key:1,class:d.deleted},o(null==(p=d.product)?void 0:p.description),3))])])])]),(null==(m=d.product)?void 0:m.active)?d.isEditing?(l(),s("div",st,[n("button",{onClick:t[4]||(t[4]=(...e)=>d.save&&d.save(...e)),class:"button is-info mx-5"},o(u.t("save")),1),n("button",{onClick:t[5]||(t[5]=e=>d.isEditing=!1),class:"button mx-5"},o(u.t("cancel")),1)])):(l(),s("div",nt,[n("button",{onClick:t[6]||(t[6]=e=>d.isEditing=!0),class:"button is-info mx-5"},o(u.t("edit")),1),n("button",{onClick:t[7]||(t[7]=(...e)=>d.deactivate&&d.deactivate(...e)),class:"button is-danger mx-5"},o(u.t("delete")),1)])):(l(),s("div",lt,[n("button",{onClick:t[3]||(t[3]=(...e)=>d.activate&&d.activate(...e)),class:"button is-info"},o(u.t("recover")),1)])),(null==(h=d.product)?void 0:h.active)?(l(),s(x,{key:3,productId:null==(b=d.product)?void 0:b.id,units:null==(g=d.product)?void 0:g.units},null,8,["productId","units"])):y("",!0)],64)}));We.render=rt,We.__scopeId="data-v-160ee60c";var dt=[{path:"/",name:"home",component:ie},{path:"/products",name:"products",component:ie},{path:"/products/add",name:"product-add",component:xe},{path:"/products/:id",name:"product-detail",component:We}];const ot={props:["customer"],inject:["n"]},ct=g("data-v-4c2d9d0d");p("data-v-4c2d9d0d");const ut={class:"has-text-center"},it={class:"ellipsis"},pt={class:"has-text-right"};m();const mt=ct(((e,t,r,d,c,u)=>{const i=a("router-link");return l(),s("tr",null,[n("td",null,[n(i,{to:{name:"customer-detail",params:{id:r.customer.id}}},{default:ct((()=>[n("span",null,o(r.customer.name),1)])),_:1},8,["to"])]),n("td",ut,[n("span",null,o(r.customer.phone),1)]),n("td",it,[n("span",null,o(r.customer.address),1)]),n("td",pt,o(u.n(parseFloat(r.customer.debt),"currency")),1)])}));ot.render=mt,ot.__scopeId="data-v-4c2d9d0d";const ht={components:{CustomerRow:ot},inject:["t"],setup(){const e=i();u((()=>{e.dispatch("customers/fetchCustomers")}));return{customers:h((()=>e.getters["customers/customers"]))}}},vt={class:"title is-4 has-text-centered mt-2"},bt={class:"table is-bordered mb-5"},gt={class:"has-text-centered"},yt={style:{width:"110px"}},ft={style:{width:"130px"}};ht.render=function(e,t,r,d,c,u){const i=a("CustomerRow");return l(),s(v,null,[n("h4",vt,o(u.t("customers.list")),1),n("table",bt,[n("thead",null,[n("tr",gt,[n("th",null,o(u.t("customers.table.customer")),1),n("th",yt,o(u.t("customers.table.phone")),1),n("th",null,o(u.t("customers.table.address")),1),n("th",ft,o(u.t("customers.table.debt")),1)])]),n("tbody",null,[(l(!0),s(v,null,b(d.customers,(e=>(l(),s(i,{key:e.id,customer:e},null,8,["customer"])))),128))])])],64)};const xt={components:{ListSearch:re}};xt.render=function(e,t,n,r,d,o){const c=a("ListSearch");return l(),s(c,{placeholder:"customers.searchPlaceholder",actionName:"customers/fetchCustomers"})};const kt={components:{CustomerList:ht,CustomerSearch:xt},inject:["t"]},Pt={class:"table-page"},It={class:"has-text-right"};kt.render=function(e,t,c,u,i,p){const m=a("router-link"),h=a("CustomerSearch"),v=a("CustomerList");return l(),s("div",Pt,[n("div",It,[n(m,{to:{name:"customer-add"},class:"button is-info is-outlined"},{default:r((()=>[d(o(p.t("customers.addButton")),1)])),_:1})]),n(h),n(v)])};const Vt={props:["order"],inject:["t","n"],setup(e){const t=h((()=>parseFloat(e.order.subtotal)));return{total:h((()=>t.value+parseFloat(e.order.debt)))}}},wt={class:"has-text-centered"},Ct={class:"has-text-right"},Ut={class:"has-text-right"},St={class:"has-text-centered"};Vt.render=function(e,t,d,c,u,i){const p=a("router-link");return l(),s("tr",null,[n("td",null,[n(p,{to:{name:"order-detail",params:{id:d.order.id}}},{default:r((()=>[n("span",null,o(d.order.customer_name),1)])),_:1},8,["to"])]),n("td",wt,[n("span",null,o(new Date(d.order.created_at).toLocaleDateString()),1)]),n("td",Ct,[n("span",null,o(i.n(c.total,"currency")),1)]),n("td",Ut,[n("span",null,o(i.n(parseFloat(d.order.payment),"currency")),1)]),n("td",St,o(i.t(`orders.status.${d.order.status}`)),1)])};const _t={components:{OrderRow:Vt},inject:["t"],setup(){const e=i();return{orders:h((()=>e.getters["orders/orders"]))}}},Et={class:"title is-4 has-text-centered mt-2"},Ot={class:"table is-bordered mb-5"},Tt={class:"has-text-centered"},Nt={style:{width:"130px"}},Dt={style:{width:"130px"}};_t.render=function(e,t,r,d,c,u){const i=a("OrderRow");return l(),s(v,null,[n("h4",Et,o(u.t("orders.list")),1),n("table",Ot,[n("thead",null,[n("tr",Tt,[n("th",null,o(u.t("customers.table.customer")),1),n("th",null,o(u.t("orders.table.date")),1),n("th",Nt,o(u.t("orders.table.total")),1),n("th",Dt,o(u.t("orders.table.payment")),1),n("th",null,o(u.t("orders.table.status")),1)])]),n("tbody",null,[(l(!0),s(v,null,b(d.orders,(e=>(l(),s(i,{key:e.id,order:e},null,8,["order"])))),128))])])],64)};const qt={components:{Units:Me,RequiredInput:he,UnrequiredInput:te,OrderList:_t},inject:["t","n"],setup(){const e=C(),a=i(),l=t(!1),s=t(""),n=t(""),r=t(""),d=t("");u((async()=>{await a.dispatch("customers/fetchCustomer",e.params.id),await a.dispatch("orders/fetchOrders",{customer:a.getters["customers/customerName"]})}));const o=h((()=>a.getters["customers/customer"]));x(o,(()=>{s.value=o.value.name,n.value=o.value.phone,r.value=o.value.address,d.value=o.value.description}));return{customer:o,isEditing:l,name:s,phone:n,address:r,description:d,save:async()=>{await a.dispatch("customers/editCustomer",{name:s.value,phone:n.value,address:r.value,description:d.value}),l.value=!1},addOrder:()=>{a.dispatch("orders/addOrder",{customer:a.getters["customers/customerId"]})}}}},Lt=g("data-v-99daaa60");p("data-v-99daaa60");const Bt={class:"title is-3 has-text-centered"},Rt={class:"table is-bordered"},jt={class:"has-text-centered"},Ft={key:1},At={class:"has-text-centered"},$t={key:1},Mt={key:1},Ht={key:0,class:"control"},Kt={key:1},Gt={key:0},zt={class:"has-text-centered"},Xt={key:0,class:"has-text-centered button-group"},Qt={key:1,class:"has-text-centered button-group"};m();const Jt=Lt(((e,t,r,d,c,u)=>{var i,p,m,h,b;const g=a("RequiredInput"),f=a("UnrequiredInput"),x=a("OrderList");return l(),s(v,null,[n("h3",Bt,o(u.t("customers.detailTitle")),1),n("table",Rt,[n("tbody",null,[n("tr",null,[n("th",null,o(u.t("customers.table.customer")),1),n("td",jt,[d.isEditing?(l(),s(g,{key:0,type:"text",modelValue:d.name,"onUpdate:modelValue":t[1]||(t[1]=e=>d.name=e),placeholder:u.t("customers.namePlaceholder")},null,8,["modelValue","placeholder"])):(l(),s("strong",Ft,o(null==(i=d.customer)?void 0:i.name),1))])]),n("tr",null,[n("th",null,o(u.t("customers.table.phone")),1),n("td",At,[d.isEditing?(l(),s(f,{key:0,type:"text",modelValue:d.phone,"onUpdate:modelValue":t[2]||(t[2]=e=>d.phone=e),placeholder:u.t("customers.phonePlaceholder")},null,8,["modelValue","placeholder"])):(l(),s("strong",$t,o(null==(p=d.customer)?void 0:p.phone),1))])]),n("tr",null,[n("th",null,o(u.t("customers.table.address")),1),n("td",null,[d.isEditing?(l(),s(f,{key:0,type:"text",modelValue:d.address,"onUpdate:modelValue":t[3]||(t[3]=e=>d.address=e),placeholder:u.t("customers.addressPlaceholder")},null,8,["modelValue","placeholder"])):(l(),s("span",Mt,o(null==(m=d.customer)?void 0:m.address),1))])]),n("tr",null,[n("th",null,o(u.t("customers.description")),1),n("td",null,[d.isEditing?(l(),s("div",Ht,[P(n("textarea",{class:"textarea",placeholder:u.t("customers.descriptionPlaceholder"),"onUpdate:modelValue":t[4]||(t[4]=e=>d.description=e)},null,8,["placeholder"]),[[I,d.description]])])):(l(),s("span",Kt,o(null==(h=d.customer)?void 0:h.description),1))])]),d.isEditing?y("",!0):(l(),s("tr",Gt,[n("th",null,o(u.t("customers.table.debt")),1),n("td",zt,[n("strong",null,o(u.n(parseFloat((null==(b=d.customer)?void 0:b.debt)||0),"currency")),1)])]))])]),d.isEditing?(l(),s("div",Xt,[n("button",{onClick:t[5]||(t[5]=(...e)=>d.save&&d.save(...e)),disabled:!d.name,class:"button is-info mx-5"},o(u.t("save")),9,["disabled"]),n("button",{onClick:t[6]||(t[6]=e=>d.isEditing=!1),class:"button mx-5"},o(u.t("cancel")),1)])):(l(),s("div",Qt,[n("button",{onClick:t[7]||(t[7]=e=>d.isEditing=!0),class:"button is-info mx-5"},o(u.t("edit")),1),n("button",{onClick:t[8]||(t[8]=(...e)=>d.addOrder&&d.addOrder(...e)),class:"button is-info mx-5"},o(u.t("orders.addButton")),1)])),n(x)],64)}));qt.render=Jt,qt.__scopeId="data-v-99daaa60";const Wt={components:{RequiredInput:he,UnrequiredInput:te,Currency:Ee},inject:["t"],setup(){const e=t(""),a=t(""),l=t(""),s=t(""),n=t(0),r=i();return{name:e,phone:a,address:l,description:s,debt:n,onSubmit:async()=>{await r.dispatch("customers/addCustomer",{name:e.value,phone:a.value,address:l.value,description:s.value,debt:n.value})}}}},Yt=g("data-v-49ff2690");p("data-v-49ff2690");const Zt={class:"title is-4 has-text-centered"},ea={class:"field"},ta={class:"label"},aa={class:"control"},la={class:"field is-grouped is-grouped-centered"},sa={class:"control"},na={class:"control"};m();const ra=Yt(((e,t,r,c,u,i)=>{const p=a("RequiredInput"),m=a("UnrequiredInput"),h=a("Currency"),b=a("router-link");return l(),s(v,null,[n("h4",Zt,o(i.t("customers.addTitle")),1),n("form",{onSubmit:t[6]||(t[6]=V(((...e)=>c.onSubmit&&c.onSubmit(...e)),["prevent"]))},[n(p,{label:i.t("customers.table.customer"),placeholder:i.t("customers.namePlaceholder"),modelValue:c.name,"onUpdate:modelValue":t[1]||(t[1]=e=>c.name=e),type:"text"},null,8,["label","placeholder","modelValue"]),n(m,{type:"text",label:i.t("customers.table.phone"),placeholder:i.t("customers.phonePlaceholder"),modelValue:c.phone,"onUpdate:modelValue":t[2]||(t[2]=e=>c.phone=e)},null,8,["label","placeholder","modelValue"]),n(m,{type:"text",label:i.t("customers.table.address"),placeholder:i.t("customers.addressPlaceholder"),modelValue:c.address,"onUpdate:modelValue":t[3]||(t[3]=e=>c.address=e)},null,8,["label","placeholder","modelValue"]),n("div",ea,[n("label",ta,o(i.t("customers.description")),1),n("div",aa,[P(n("textarea",{class:"textarea",placeholder:i.t("customers.descriptionPlaceholder"),"onUpdate:modelValue":t[4]||(t[4]=e=>c.description=e)},null,8,["placeholder"]),[[I,c.description]])])]),n(h,{modelValue:c.debt,"onUpdate:modelValue":t[5]||(t[5]=e=>c.debt=e),label:i.t("customers.table.debt"),placeholder:i.t("customers.table.debt")},null,8,["modelValue","label","placeholder"]),n("div",la,[n("div",sa,[n("button",{type:"submit",class:"button is-info",style:{width:"100px"},disabled:!c.name},o(i.t("add")),9,["disabled"])]),n("div",na,[n(b,{to:{name:"customers"},class:"button is-link is-light",style:{width:"100px"}},{default:Yt((()=>[d(o(i.t("cancel")),1)])),_:1})])])],32)],64)}));Wt.render=ra,Wt.__scopeId="data-v-49ff2690";var da=[{path:"/customers",name:"customers",component:kt},{path:"/customers/add",name:"customer-add",component:Wt},{path:"/customers/:id",name:"customer-detail",component:qt}];const oa={components:{ListSearch:re}};oa.render=function(e,t,n,r,d,o){const c=a("ListSearch");return l(),s(c,{placeholder:"orders.searchPlaceholder",actionName:"orders/fetchOrders",paramName:"customer"})};const ca={components:{OrderList:_t,OrderSearch:oa},inject:["t"],setup(){const e=i();u((()=>{e.dispatch("orders/fetchOrders")}))}},ua={class:"table-page"},ia={class:"has-text-right"};ca.render=function(e,t,c,u,i,p){const m=a("router-link"),h=a("OrderSearch"),v=a("OrderList");return l(),s("div",ua,[n("div",ia,[n(m,{to:{name:"order-add"},class:"button is-info is-outlined"},{default:r((()=>[d(o(p.t("orders.addButton")),1)])),_:1})]),n(h),n(v)])};const pa={components:{DebounceInput:ne},props:["label","placeholder","modelValue","getter","action","initial","paramName"],emits:["update:modelValue"],setup(e,a){const l=t(!1),s=t(!1),n=i(),r=t("");x(r,(()=>{n.dispatch(e.action,{[e.paramName]:r.value})})),u((()=>{n.dispatch(e.action),setTimeout((()=>{e.initial&&o(e.initial)}),300)}));const d=h((()=>n.getters[e.getter])),o=e=>{const t=d.value.find((t=>e===t.id||t.name.toLowerCase()===r.value.toLowerCase()));t?(r.value=t.name,l.value=!1,a.emit("update:modelValue",t.id)):(l.value=!0,a.emit("update:modelValue",null))};return{invalid:l,suggestions:d,isFocusing:s,focus:()=>{l.value=!1,s.value=!0},blur:()=>{""===r.value&&(l.value=!0),s.value&&(o(null),s.value=!1)},value:r,click:e=>{o(e),s.value=!1}}}},ma=g("data-v-384c09ee");p("data-v-384c09ee");const ha={class:"suggestion-wrapper"},va={key:0,class:"suggestions"};m();const ba=ma(((e,t,r,d,c,u)=>{const i=a("debounce-input");return l(),s("div",ha,[n(i,{label:r.label,placeholder:r.placeholder,type:"text",modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),focus:d.focus,blur:d.blur},null,8,["label","placeholder","modelValue","focus","blur"]),d.isFocusing?(l(),s("div",va,[n("div",null,[(l(!0),s(v,null,b(d.suggestions,(e=>(l(),s("strong",{class:"suggestion",key:e.id,onClick:V((t=>d.click(e.id,e.name)),["stop"])},o(e.name),9,["onClick"])))),128))])])):y("",!0)])}));pa.render=ba,pa.__scopeId="data-v-384c09ee";const ga={props:["title"],emits:["close"],setup:(e,t)=>({close:()=>{t.emit("close")}})},ya=g("data-v-fd5feb1e");p("data-v-fd5feb1e");const fa={class:"modal is-active"},xa={class:"modal-content"},ka={class:"box"},Pa={class:"control has-icons-right"},Ia={class:"title is-4 has-text-centered"},Va=n("i",{class:"fas fa-times-circle"},null,-1),wa=n("hr",{class:"mb-3"},null,-1);m();const Ca=ya(((e,t,a,r,d,c)=>(l(),s(S,{to:"body"},[n("div",fa,[n("div",{class:"modal-background",onClick:t[1]||(t[1]=(...e)=>r.close&&r.close(...e))}),n("div",xa,[n("div",ka,[n("div",Pa,[n("h4",Ia,o(a.title),1),n("span",{class:"icon is-small is-right",onClick:t[2]||(t[2]=(...e)=>r.close&&r.close(...e))},[Va])]),wa,U(e.$slots,"default")])])])]))));ga.render=Ca,ga.__scopeId="data-v-fd5feb1e";const Ua={props:["title","detail"],emits:["save","close"],components:{RequiredInput:he,UnrequiredInput:te,Suggestion:pa,BaseModal:ga,Currency:Ee},inject:["t"],setup(e,a){var l,s,n,r,d;const o=i(),c=t(null==(l=e.detail)?void 0:l.product_id),u=t(null==(s=e.detail)?void 0:s.unit),p=t(null==(n=e.detail)?void 0:n.quantity),m=t((null==(r=e.detail)?void 0:r.price)||0),v=t((null==(d=e.detail)?void 0:d.ready)||!1),b=k("n"),g=h((()=>{if(c.value){const e=o.getters["products/products"].find((e=>e.id===c.value));if(e)return e.units}return[]}));x(g,(()=>{var e,t;1===(null==(e=g.value)?void 0:e.length)?u.value=g.value[0].id:(null==(t=g.value)?void 0:t.length)>1?void 0===g.value.find((e=>e.id===u.value))&&(u.value=0):u.value=0})),x(u,(()=>{var e;if(u.value>0){const t=null==(e=g.value)?void 0:e.find((e=>e.id===u.value));m.value=t?t.price:0}else m.value=0}));const y=h((()=>m.value&&p.value>0?b(m.value*p.value,"currency"):b(0,"currency"))),f=h((()=>!(u.value>0&&p.value>0&&m.value>0)));return{product:c,unit:u,price:m,quantity:p,cost:y,ready:v,isInvalid:f,units:g,save:()=>{a.emit("save",{unit:u.value,quantity:p.value,price:m.value,ready:v.value})},close:()=>{a.emit("close")}}}},Sa=g("data-v-3b717ea6");p("data-v-3b717ea6");const _a={class:"table is-bordered"},Ea={style:{"max-width":"330px"}},Oa={value:0},Ta={key:1},Na={class:"has-text-right pr-5"},Da={class:"has-text-centered"},qa={class:"field is-grouped is-justify-content-center"},La={class:"control"},Ba={class:"control"};m();const Ra=Sa(((e,t,r,d,c,u)=>{const i=a("Suggestion"),p=a("Currency"),m=a("RequiredInput"),h=a("BaseModal");return l(),s(h,{title:r.title,onClose:d.close},{default:Sa((()=>[n("form",{onSubmit:t[7]||(t[7]=V(((...e)=>d.save&&d.save(...e)),["prevent"]))},[n("table",_a,[n("tbody",null,[n("tr",null,[n("th",null,o(u.t("products.table.product")),1),n("td",Ea,[n(i,{placeholder:u.t("products.namePlaceholder"),action:"products/fetchProducts",getter:"products/products",modelValue:d.product,"onUpdate:modelValue":t[1]||(t[1]=e=>d.product=e),initial:d.product,paramName:"name"},null,8,["placeholder","modelValue","initial"])])]),n("tr",null,[n("th",null,o(u.t("products.table.unit")),1),n("td",null,[d.units.length>1?(l(),s("div",{key:0,class:["select is-success",{"is-danger":0===d.unit}]},[P(n("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>d.unit=e)},[n("option",Oa,o(u.t("orders.details.select")),1),(l(!0),s(v,null,b(d.units,(e=>(l(),s("option",{key:e.id,value:e.id},o(e.name),9,["value"])))),128))],512),[[_,d.unit]])],2)):d.units.length>0?(l(),s("span",Ta,o(d.units[0].name),1)):y("",!0)])]),n("tr",null,[n("th",null,o(u.t("products.table.price")),1),n("td",null,[n(p,{modelValue:d.price,"onUpdate:modelValue":t[3]||(t[3]=e=>d.price=e),placeholder:u.t("units.pricePlaceholder")},null,8,["modelValue","placeholder"])])]),n("tr",null,[n("th",null,o(u.t("orders.details.quantity")),1),n("td",null,[n(m,{type:"number",placeholder:u.t("orders.quantityPlaceholder"),modelValue:d.quantity,"onUpdate:modelValue":t[4]||(t[4]=e=>d.quantity=e)},null,8,["placeholder","modelValue"])])]),n("tr",null,[n("th",null,o(u.t("orders.details.cost")),1),n("td",Na,o(d.cost),1)]),n("tr",null,[n("th",null,o(u.t("orders.details.ready")),1),n("td",Da,[P(n("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=e=>d.ready=e)},null,512),[[E,d.ready]])])])])]),n("div",qa,[n("div",La,[n("button",{type:"submit",disabled:d.isInvalid,class:"button is-link"},o(u.t("save")),9,["disabled"])]),n("div",Ba,[n("button",{type:"button",onClick:t[6]||(t[6]=V(((...e)=>d.close&&d.close(...e)),["stop"])),class:"button is-link is-light"},o(u.t("cancel")),1)])])],32)])),_:1},8,["title","onClose"])}));Ua.render=Ra,Ua.__scopeId="data-v-3b717ea6";const ja={components:{OrderDetailModal:Ua},props:["detail"],inject:["t","n"],setup(e){const a=t(!1),l=i();return{showEdit:a,toggleEdit:()=>{a.value=!a.value},edit:async t=>{await l.dispatch("orders/editDetail",{id:e.detail.id,payload:t}),a.value=!1}}}},Fa=g("data-v-15afd51d");p("data-v-15afd51d");const Aa=n("i",{class:"fas fa-check"},null,-1),$a={class:"has-text-centered"},Ma={class:"has-text-right hide-on-small"},Ha={class:"has-text-right"},Ka={class:"has-text-right"},Ga={class:"has-text-centered has-text-info"};m();const za=Fa(((e,t,r,d,c,u)=>{const i=a("OrderDetailModal");return l(),s(v,null,[n("tr",null,[n("td",null,[r.detail.ready?(l(),s("span",{key:0,class:"icon has-text-primary",title:u.t("orders.details.ready")},[Aa],8,["title"])):y("",!0),n("span",null,o(r.detail.product_name),1)]),n("td",$a,[n("span",null,o(r.detail.unit_name),1)]),n("td",Ma,o(u.n(parseFloat(r.detail.price||0),"currency")),1),n("td",Ha,o(r.detail.quantity),1),n("td",Ka,o(u.n(r.detail.cost,"currency")),1),n("td",Ga,[n("button",{title:u.t("edit"),onClick:t[1]||(t[1]=(...e)=>d.toggleEdit&&d.toggleEdit(...e)),class:"button is-small is-info has-text-weight-medium"},"Sửa",8,["title"])])]),d.showEdit?(l(),s(i,{key:0,title:u.t("orders.details.editTitle"),detail:r.detail,onClose:d.toggleEdit,onSave:d.edit},null,8,["title","detail","onClose","onSave"])):y("",!0)],64)}));ja.render=za,ja.__scopeId="data-v-15afd51d";const Xa={components:{RequiredInput:he,OrderDetail:ja,OrderDetailModal:Ua},props:["orderId","details"],inject:["t"],setup(a){const l=t(""),s=t(0),n=t(!1),r=i();return{name:l,price:s,showAdd:n,toggleAdd:()=>{n.value=!n.value},click:async()=>{await r.dispatch("products/addOrderDetail",{product:a.productId,name:l.value,price:s.value}),l.value="",s.value=0},addDetail:async t=>{await r.dispatch("orders/addDetail",e({order:a.orderId},t)),n.value=!1}}}},Qa=g("data-v-00e8d86c");p("data-v-00e8d86c");const Ja={class:"title is-5 has-text-centered"},Wa={class:"table is-bordered"},Ya={class:"has-text-centered"},Za={class:"hide-on-small"},el={style:{width:"50px"}},tl={class:"has-text-centered has-text-primary is-size-2"},al=n("i",{class:"fas fa-plus-circle"},null,-1);m();const ll=Qa(((e,t,r,d,c,u)=>{const i=a("OrderDetail"),p=a("OrderDetailModal");return l(),s(v,null,[n("h5",Ja,o(u.t("orders.details.title")),1),n("table",Wa,[n("thead",null,[n("tr",Ya,[n("th",null,o(u.t("products.name")),1),n("th",null,o(u.t("products.table.unit")),1),n("th",Za,o(u.t("products.table.price")),1),n("th",null,o(u.t("orders.details.quantity")),1),n("th",null,o(u.t("orders.details.cost")),1),n("th",el,o(u.t("orders.details.edit")),1)])]),n("tbody",null,[(l(!0),s(v,null,b(r.details,(e=>(l(),s(i,{key:e.id,detail:e},null,8,["detail"])))),128))])]),n("div",tl,[n("span",{onClick:t[1]||(t[1]=(...e)=>d.toggleAdd&&d.toggleAdd(...e)),title:u.t("orders.details.add"),class:"icon"},[al],8,["title"])]),d.showAdd?(l(),s(p,{key:0,title:u.t("orders.details.add"),onClose:d.toggleAdd,onSave:d.addDetail},null,8,["title","onClose","onSave"])):y("",!0)],64)}));Xa.render=ll,Xa.__scopeId="data-v-00e8d86c";const sl={emits:["close"],inject:["t"],components:{BaseModal:ga,Currency:Ee},setup(e,a){const l=i(),s=t(0),n=()=>{a.emit("close")};w((()=>{s.value=l.getters["orders/payment"]}));const r=h((()=>!(s.value>=0)));return{save:async()=>{await l.dispatch("orders/editOrder",{payment:s.value}),n()},close:n,payment:s,isInvalid:r}}},nl=g("data-v-559dee14");p("data-v-559dee14");const rl={class:"table is-bordered"},dl={class:"field is-grouped is-justify-content-center"},ol={class:"control"},cl={class:"control"};m();const ul=nl(((e,t,r,d,c,u)=>{const i=a("Currency"),p=a("BaseModal");return l(),s(p,{title:u.t("orders.payment.title"),onClose:d.close},{default:nl((()=>[n("form",{onSubmit:t[3]||(t[3]=V(((...e)=>d.save&&d.save(...e)),["prevent"]))},[n("table",rl,[n("tbody",null,[n("tr",null,[n("th",null,o(u.t("orders.payment.payment")),1),n("td",null,[n(i,{placeholder:u.t("orders.paymentPlaceholder"),modelValue:d.payment,"onUpdate:modelValue":t[1]||(t[1]=e=>d.payment=e)},null,8,["placeholder","modelValue"])])])])]),n("div",dl,[n("div",ol,[n("button",{type:"submit",disabled:d.isInvalid,class:"button is-link"},o(u.t("save")),9,["disabled"])]),n("div",cl,[n("button",{type:"button",onClick:t[2]||(t[2]=V(((...e)=>d.close&&d.close(...e)),["stop"])),class:"button is-link is-light"},o(u.t("cancel")),1)])])],32)])),_:1},8,["title","onClose"])}));sl.render=ul,sl.__scopeId="data-v-559dee14";const il={components:{OrderDetails:Xa,RequiredInput:he,UnrequiredInput:te,PaymentModal:sl},inject:["t","n"],setup(){const e=C(),a=i(),l=t(!1);u((()=>{a.dispatch("orders/fetchOrder",e.params.id)}));const s=h((()=>a.getters["orders/order"])),n=h((()=>a.getters["orders/customer"])),r=h((()=>a.getters["orders/subtotal"])),d=h((()=>s.value?parseFloat(s.value.debt)+r.value:0)),o=h((()=>s.value?d.value-parseFloat(s.value.payment):0));return{order:s,customer:n,subtotal:r,total:d,remain:o,showPayment:l,togglePayment:()=>{l.value=!l.value}}}},pl=g("data-v-1beea322");p("data-v-1beea322");const ml={class:"title is-3 has-text-centered"},hl={class:"table is-bordered"},vl={class:"has-text-centered"},bl={class:"has-text-centered"},gl={class:"has-text-centered"},yl={class:"has-text-centered"},fl={class:"has-text-centered"},xl={class:"has-text-centered"},kl={class:"has-text-centered"},Pl={class:"has-text-centered"},Il={key:0},Vl={class:"has-text-centered mb-5 pb-4"};m();const wl=pl(((e,t,r,c,u,i)=>{var p,m,h,b,g;const f=a("router-link"),x=a("OrderDetails"),k=a("PaymentModal");return l(),s(v,null,[n("h3",ml,o(i.t("orders.detailTitle")),1),n("table",hl,[n("tbody",null,[n("tr",null,[n("th",null,o(i.t("customers.table.customer")),1),n("td",vl,[n(f,{to:{name:"customer-detail",params:{id:null==(p=c.customer)?void 0:p.id}}},{default:pl((()=>{var e;return[d(o(null==(e=c.customer)?void 0:e.name),1)]})),_:1},8,["to"])])]),n("tr",null,[n("th",null,o(i.t("customers.table.phone")),1),n("td",bl,[n("strong",null,o(null==(m=c.customer)?void 0:m.phone),1)])]),n("tr",null,[n("th",null,o(i.t("customers.table.address")),1),n("td",null,[n("span",null,o(null==(h=c.customer)?void 0:h.address),1)])]),n("tr",null,[n("th",null,o(i.t("customers.table.debt")),1),n("td",gl,[n("strong",null,o(i.n(parseFloat((null==(b=c.order)?void 0:b.debt)||0),"currency")),1)])]),n("tr",null,[n("th",null,o(i.t("orders.table.subtotal")),1),n("td",yl,[n("strong",null,o(i.n(c.subtotal,"currency")),1)])]),n("tr",null,[n("th",null,o(i.t("orders.table.total")),1),n("td",fl,[n("strong",null,o(i.n(c.total,"currency")),1)])]),n("tr",null,[n("th",null,o(i.t("orders.table.payment")),1),n("td",xl,[n("strong",null,o(i.n(parseFloat((null==(g=c.order)?void 0:g.payment)||0),"currency")),1)])]),n("tr",null,[n("th",null,o(i.t("orders.table.remain")),1),n("td",kl,[n("strong",null,o(i.n(c.remain,"currency")),1)])]),n("tr",null,[n("th",null,o(i.t("orders.table.status")),1),n("td",Pl,[c.order?(l(),s("strong",Il,o(i.t(`orders.status.${c.order.status}`)),1)):y("",!0)])])])]),n("div",Vl,[n("button",{onClick:t[1]||(t[1]=(...e)=>c.togglePayment&&c.togglePayment(...e)),class:"button is-info is-outlined"},o(i.t("orders.pay")),1)]),c.order?(l(),s(x,{key:0,orderId:c.order.id,details:c.order.details},null,8,["orderId","details"])):y("",!0),c.showPayment?(l(),s(k,{key:1,onClose:c.togglePayment},null,8,["onClose"])):y("",!0)],64)}));il.render=wl,il.__scopeId="data-v-1beea322";const Cl={components:{Suggestion:pa},inject:["t"],setup(){const e=C(),a=i(),l=t(null),s=h((()=>{const t=parseInt(e.query.customer);return isNaN(t)?null:t}));return{submit:()=>{l.value&&a.dispatch("orders/addOrder",{customer:l.value})},customer:l,initial:s}}},Ul=g("data-v-41f1e654");p("data-v-41f1e654");const Sl={class:"title is-4 has-text-centered"},_l={class:"has-text-centered mt-5 pt-3"};m();const El=Ul(((e,t,r,d,c,u)=>{const i=a("Suggestion");return l(),s(v,null,[n("h4",Sl,o(u.t("orders.addButton")),1),n("form",{onSubmit:t[2]||(t[2]=V(((...e)=>d.submit&&d.submit(...e)),["prevent"]))},[n(i,{action:"customers/fetchCustomers",getter:"customers/customers",initial:d.initial,modelValue:d.customer,"onUpdate:modelValue":t[1]||(t[1]=e=>d.customer=e),placeholder:u.t("customers.namePlaceholder"),label:u.t("customers.table.customer"),paramName:"name"},null,8,["initial","modelValue","placeholder","label"]),n("div",_l,[n("button",{disabled:!d.customer,type:"submit",class:"button is-info is-outlined"},o(u.t("orders.addButton")),9,["disabled"])])],32)],64)}));Cl.render=El,Cl.__scopeId="data-v-41f1e654";var Ol=[{path:"/orders",name:"orders",component:ca},{path:"/orders/add",name:"order-add",component:Cl},{path:"/orders/:id",name:"order-detail",component:il}];const Tl={inject:["t"],setup(){const e=i();return{language:h((()=>e.getters.language)),change:t=>{e.dispatch("changeLanguage",t.target.value)}}}},Nl=g("data-v-306df169");p("data-v-306df169");const Dl={class:"title is-3 has-text-centered"},ql={class:"language"},Ll={class:"select"},Bl=n("option",{value:"en"},"English",-1),Rl=n("option",{value:"vi"},"Tiếng Việt",-1);m();const jl=Nl(((e,t,a,r,d,c)=>(l(),s(v,null,[n("h3",Dl,o(c.t("settings.title")),1),n("div",ql,[n("p",null,[n("strong",null,o(c.t("settings.selectLanguage")),1)]),n("div",Ll,[n("select",{value:r.language,onChange:t[1]||(t[1]=(...e)=>r.change&&r.change(...e))},[Bl,Rl],40,["value"])])])],64))));Tl.render=jl,Tl.__scopeId="data-v-306df169";const Fl=[];Fl.push(...dt),Fl.push(...da),Fl.push(...Ol),Fl.push({path:"/settings",name:"settings",component:Tl});const Al=O({history:T(),routes:Fl});var $l={products:e=>e.products,product:e=>e.product,productId(e){var t;return null==(t=e.product)?void 0:t.id}},Ml={fetchProducts(e,t){e.products=t},fetchProduct(e,t){e.product=t},activateProduct(e){e.product.active=!0},deactivateProduct(e){e.product.active=!1},editProduct(t,{name:a,description:l}){t.product=e(e({},t.product),{name:a,description:l})},addUnit(e,t){e.product.units.push(t)},activateUnit(e,t){e.product.units.forEach((e=>{t===e.id&&(e.active=!0)}))},deactivateUnit(e,t){e.product.units.forEach((e=>{t===e.id&&(e.active=!1)}))},editUnit(t,{unitId:a,payload:l}){t.product.units=t.product.units.map((t=>a===t.id?e(e({},t),l):t))}};const Hl=window.location.hostname||"localhost",Kl=N.create({baseURL:`http://${Hl}:8000/api/`});class Gl{constructor(e){this.BASE_ENDPOINT=e}fetchAll(e={}){return Kl.get(`${this.BASE_ENDPOINT}/`,{params:e})}fetchOneById(e){return Kl.get(`${this.BASE_ENDPOINT}/${e}/`)}add(e){return Kl.post(`${this.BASE_ENDPOINT}/`,e)}updateById(e,t){return Kl.patch(`${this.BASE_ENDPOINT}/${e}/`,t)}}var zl={products:new class extends Gl{activateProduct(e){return Kl.patch(`products/${e}/`,{active:!0})}deactivateProduct(e){return Kl.patch(`products/${e}/`,{active:!1})}addUnit(e){return Kl.post("units/",e)}updateUnitById(e,t){return Kl.patch(`units/${e}/`,t)}activateUnit(e){return Kl.patch(`units/${e}/`,{active:!0})}deactivateUnit(e){return Kl.patch(`units/${e}/`,{active:!1})}}("products"),customers:new Gl("customers"),orders:new Gl("orders"),orderDetails:new Gl("orders/details")},Xl={namespaced:!0,state:()=>({products:[],product:null}),getters:$l,mutations:Ml,actions:{async fetchProducts({commit:e},t={}){e("fetchProducts",(await zl.products.fetchAll(t)).data)},async fetchProduct({commit:e},t){e("fetchProduct",(await zl.products.fetchOneById(t)).data)},async addProduct(e,t){const a=await zl.products.add(t);Al.push(`/products/${a.data.id}`)},async editProduct({commit:e,getters:t},a){await zl.products.updateById(t.productId,a),e("editProduct",a)},async activateProduct({commit:e,getters:t}){await zl.products.activateProduct(t.productId),e("activateProduct")},async deactivateProduct({commit:e,getters:t}){await zl.products.deactivateProduct(t.productId),e("deactivateProduct")},async addUnit({commit:e},t){e("addUnit",(await zl.products.addUnit(t)).data)},async editUnit({commit:e},{unitId:t,payload:a}){await zl.products.updateUnitById(t,a),e("editUnit",{unitId:t,payload:a})},async activateUnit({commit:e},t){await zl.products.activateUnit(t),e("activateUnit",t)},async deactivateUnit({commit:e},t){await zl.products.deactivateUnit(t),e("deactivateUnit",t)}}},Ql={namespaced:!0,state:()=>({customers:[],customer:null}),getters:{customers:e=>e.customers,customer:e=>e.customer,customerName(e){var t,a;return null!=(a=null==(t=e.customer)?void 0:t.name)?a:""},customerId(e){var t;return null==(t=e.customer)?void 0:t.id}},mutations:{fetchCustomers(e,t){e.customers=t},fetchCustomer(e,t){e.customer=t},editCustomer(t,a){t.customer=e(e({},t.customer),a)}},actions:{async fetchCustomers({commit:e},t={}){e("fetchCustomers",(await zl.customers.fetchAll(t)).data)},async fetchCustomer({commit:e},t){e("fetchCustomer",(await zl.customers.fetchOneById(t)).data)},async addCustomer(e,t){const a=await zl.customers.add(t);Al.push({name:"customer-detail",params:{id:a.data.id}})},async editCustomer({commit:e,getters:t},a){await zl.customers.updateById(t.customerId,a),e("editCustomer",a)}}},Jl={namespaced:!0,state:()=>({orders:[],order:null,customer:null}),getters:{orders:e=>e.orders,order:e=>e.order,orderId(e){var t;return null==(t=e.order)?void 0:t.id},customer:e=>e.customer,subtotal(e){var t;return(null==(t=e.order)?void 0:t.details.reduce(((e,t)=>e+parseFloat(t.cost)),0))||0},payment(e){var t;return(null==(t=e.order)?void 0:t.payment)||0}},mutations:{fetchOrders(e,t){e.orders=t},fetchOrder(e,t){e.order=t},editOrder(t,a){t.order=e(e({},t.order),a)},fetchOrderCusomer(e,t){e.customer=t},addDetail(e,t){e.order.details.push(t)},editDetail(e,{id:t,detail:a}){e.order.details=e.order.details.map((e=>e.id===t?a:e));const l=e.order.details.every((e=>e.ready)),s=e.order.details.every((e=>!e.ready));e.order.status=l?"r":s?"o":"p"}},actions:{async fetchOrders({commit:e},t={}){e("fetchOrders",(await zl.orders.fetchAll(t)).data)},async fetchOrder({commit:e},t){const a=await zl.orders.fetchOneById(t);e("fetchOrder",a.data);e("fetchOrderCusomer",(await zl.customers.fetchOneById(a.data.customer)).data)},async addOrder(e,t){const a=await zl.orders.add(t);Al.push({name:"order-detail",params:{id:a.data.id}})},async editOrder({commit:e,getters:t},a){await zl.orders.updateById(t.orderId,a),e("editOrder",a)},async addDetail({commit:e},t){e("addDetail",(await zl.orderDetails.add(t)).data)},async editDetail({commit:e},{id:t,payload:a}){e("editDetail",{id:t,detail:(await zl.orderDetails.updateById(t,a)).data})}}};const Wl=D({locale:"en",messages:{en:{navbar:{products:"Products",customers:"Customers",orders:"Orders",settings:"Settings"},products:{list:"Product List",table:{product:"Product",unit:"Measurement Unit",price:"Price"},addButton:"Add Product",name:"Name",namePlaceholder:"Enter product name",description:"Description",descriptionPlaceholder:"Enter product description",addTitle:"Add Product",detailTitle:"Product",searchPlaceholder:"Enter name to search for products"},units:{title:"Units",name:"Name",namePlaceholder:"Enter unit name",price:"Price",pricePlaceholder:"Enter price",action:"Action"},customers:{searchPlaceholder:"Enter name to search for customers",list:"Customer List",addButton:"Add Customer",table:{customer:"Customer",phone:"Phone",address:"Address",debt:"Debt"},detailTitle:"Customer",description:"Description",namePlaceholder:"Enter customer name",phonePlaceholder:"Enter customer phone number",addressPlaceholder:"Enter customer address",descriptionPlaceholder:"Enter customer description",addTitle:"Add Customer"},orders:{searchPlaceholder:"Enter customer name to search for orders",list:"Order List",addButton:"Add Order",table:{date:"Date",subtotal:"Subtotal",total:"Total",payment:"Payment",remain:"Remain",status:"Status"},status:{o:"Ordered",p:"Preparing",r:"Ready",s:"Shipped"},detailTitle:"Order",details:{title:"Order Details",quantity:"Quantity",cost:"Cost",ready:"Ready",add:"Add Order Detail",edit:"Edit",editTitle:"Edit Order Detail",select:"Select Measurement Unit"},quantityPlaceholder:"Enter quantity",pay:"Pay",paymentPlaceholder:"Enter payment",payment:{title:"Payment",payment:"Payment"}},settings:{title:"Settings",selectLanguage:"Select your language"},add:"Add",save:"Save",cancel:"Cancel",recover:"Recover",edit:"Edit",delete:"Delete",search:"Search"},vi:{navbar:{products:"Hàng Hóa",customers:"Khách Hàng",orders:"Đơn Hàng",settings:"Cài Đặt"},products:{list:"Danh sách các mặt hàng",table:{product:"Tên hàng",unit:"Đơn vị tính",price:"Giá tiền"},addButton:"Thêm mặt hàng",name:"Tên hàng",namePlaceholder:"Nhập tên hàng",description:"Thông tin mặt hàng",descriptionPlaceholder:"Nhập thông tin về mặt hàng",addTitle:"Thêm Mặt Hàng",detailTitle:"Thông tin hàng",searchPlaceholder:"Nhập tên để tìm kiếm hàng"},units:{title:"Đơn vị tính",name:"Đơn vị",namePlaceholder:"Nhập đơn vị",price:"Giá tiền",pricePlaceholder:"Nhập giá tiền",action:""},customers:{searchPlaceholder:"Nhập tên để tìm kiếm khách hàng",list:"Danh sách khách hàng",addButton:"Thêm Khách Hàng",table:{customer:"Tên Khách Hàng",phone:"S.Đ.T.",address:"Địa Chỉ",debt:"Nợ Cũ"},detailTitle:"Khách Hàng",description:"Thông Tin Khách Hàng",namePlaceholder:"Nhập tên khách hàng",phonePlaceholder:"Nhập số  điện thoại của khách hàng",addressPlaceholder:"Nhập địa chỉ của khách hàng",descriptionPlaceholder:"Nhập thông tin khách hàng",addTitle:"Thêm Khách Hàng"},orders:{searchPlaceholder:"Nhập tên khách hàng để tìm kiếm đơn hàng",list:"Danh sách đơn hàng",addButton:"Thêm Đơn Hàng",table:{date:"Ngày",subtotal:"Tổng tiền hàng",total:"Tổng tiền",payment:"Đã thanh toán",remain:"Còn thiếu",status:"Trạng Thái"},status:{o:"Chưa soạn",p:"Đang soạn",r:"Soạn xong",s:"Đã chở"},detailTitle:"Đơn Hàng",details:{title:"Thông Tin Đơn Hàng",quantity:"Số Lượng",cost:"Thành Tiền",ready:"Đã Soạn",add:"Thêm Mặt Hàng",edit:"",editTitle:"Chỉnh Sửa Thông Tin Hàng",select:"Chọn Đơn Vị Tính"},quantityPlaceholder:"Nhập số lượng hàng",pay:"Thanh toán",paymentPlaceholder:"Nhập số tiền đã thanh toán",payment:{title:"Thanh Toán",payment:"Số tiền đã thanh toán"}},settings:{title:"Cài Đặt",selectLanguage:"Lựa chọn ngôn ngữ"},add:"Thêm",save:"Lưu",cancel:"Hủy",recover:"Phục hồi",edit:"Chỉnh sửa",delete:"Xóa",search:"Tìm kiếm"}},numberFormats:{en:{currency:{style:"currency",currency:"USD"}},vi:{currency:{style:"currency",currency:"VND"}}}});var Yl=q({modules:{products:Xl,customers:Ql,orders:Jl},state:{language:localStorage.getItem("language")||"vi"},getters:{language:e=>e.language},mutations:{changeLanguage(e,t){localStorage.setItem("language",t),e.language=t,Wl.global.locale=t}},actions:{changeLanguage({commit:e},t){e("changeLanguage",t)},setLanguage({getters:e}){Wl.global.locale=e.language}}});const Zl=L(H);Zl.use(Al),Zl.use(Yl),Zl.use(Wl),Zl.mount("#app");
