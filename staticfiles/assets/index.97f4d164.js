var e=Object.assign;import{r as t,a,o as l,c as s,b as n,w as r,d,t as o,u as c,e as i,f as u,p,g as m,h,F as v,i as b,j as g,k as y,l as f,m as x,n as k,q as P,v as I,s as w,x as V,y as C,z as U,T as S,A as _,B as T,C as E,D as O,E as N,G as D,H as L,I as q}from"./vendor.9c11db83.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const l=new URL(e,location),s=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,n)=>{const r=new URL(e,l);if(self[t].moduleMap[r])return a(self[t].moduleMap[r]);const d=new Blob([`import * as m from '${r}';`,`${t}.moduleMap['${r}']=m;`],{type:"text/javascript"}),o=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(d),onerror(){n(new Error(`Failed to import: ${e}`)),s(o)},onload(){a(self[t].moduleMap[r]),s(o)}});document.head.appendChild(o)})),self[t].moduleMap={}}}("/assets/");const B={inject:["t"],setup(){const e=t(!1);return{show:e,toggleShow:()=>{e.value=!e.value}}}},R={class:"navbar",role:"navigation","aria-label":"main navigation"},j={class:"navbar-brand"},F=n("span",{"aria-hidden":"true"},null,-1),$=n("span",{"aria-hidden":"true"},null,-1),A=n("span",{"aria-hidden":"true"},null,-1),M={class:"navbar-start"};B.render=function(e,t,c,i,u,p){const m=a("router-link");return l(),s("nav",R,[n("div",j,[n("a",{role:"button",class:["navbar-burger",{"is-active":i.show}],"aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",onClick:t[1]||(t[1]=(...e)=>i.toggleShow&&i.toggleShow(...e))},[F,$,A],2)]),n("div",{id:"navbarBasicExample",class:["navbar-menu",{"is-active":i.show}]},[n("div",M,[n(m,{to:{name:"products"},class:"navbar-item"},{default:r((()=>[d(o(p.t("navbar.products")),1)])),_:1}),n(m,{to:{name:"customers"},class:"navbar-item"},{default:r((()=>[d(o(p.t("navbar.customers")),1)])),_:1}),n(m,{to:{name:"orders"},class:"navbar-item"},{default:r((()=>[d(o(p.t("navbar.orders")),1)])),_:1}),n(m,{to:{name:"settings"},class:"navbar-item"},{default:r((()=>[d(o(p.t("navbar.settings")),1)])),_:1})])],2)])};const H={components:{Navbar:B},provide(){return{t:this.t,n:this.n,websiteTitle:"Tạp Hóa Cô Mai"}},setup(){const{t:e,n:t}=c(),a=u();return i((()=>{a.dispatch("setLanguage")})),{t:e,n:t}}},z={class:"container"};H.render=function(e,t,r,d,o,c){const i=a("Navbar"),u=a("router-view");return l(),s("div",z,[n(i),n(u)])};const K={props:["product"],inject:["n"],setup:e=>({firstUnit:h((()=>e.product.active?e.product.units[0]:void 0)),otherUnits:h((()=>e.product.active?e.product.units.slice(1):[])),rowSpan:h((()=>e.product.active?Math.max(e.product.units.length,1):1)),toLink:h((()=>({name:"product-detail",params:{id:e.product.id}})))})},G=g("data-v-380133c0");p("data-v-380133c0");const X={class:"has-text-right"},Q={class:"has-text-right"};m();const J=G(((e,t,r,c,i,u)=>{var p;const m=a("router-link");return l(),s(v,null,[n("tr",null,[n("td",{rowspan:c.rowSpan,class:"product-name is-capitalized"},[n(m,{to:c.toLink,class:{deleted:!r.product.active}},{default:G((()=>[d(o(r.product.name),1)])),_:1},8,["to","class"])],8,["rowspan"]),n("td",null,o((null==(p=c.firstUnit)?void 0:p.name)||""),1),n("td",X,o(c.firstUnit?u.n(parseFloat(c.firstUnit.price),"currency"):""),1)]),(l(!0),s(v,null,b(c.otherUnits,(e=>(l(),s("tr",{key:e.id},[n("td",null,o(e.name),1),n("td",Q,o(u.n(parseFloat(e.price),"currency")),1)])))),128))],64)}));K.render=J,K.__scopeId="data-v-380133c0";const W={components:{ProductRow:K},inject:["t"],setup(){const e=u();i((()=>{e.dispatch("products/fetchProducts")}));return{products:h((()=>e.getters["products/products"]))}}},Y={class:"title is-4 has-text-centered mt-2"},Z={class:"table is-bordered mb-5"},ee={class:"has-text-centered"};W.render=function(e,t,r,d,c,i){const u=a("ProductRow");return l(),s(v,null,[n("h4",Y,o(i.t("products.list")),1),n("table",Z,[n("thead",null,[n("tr",ee,[n("th",null,o(i.t("products.table.product")),1),n("th",null,o(i.t("products.table.unit")),1),n("th",null,o(i.t("products.table.price")),1)])]),n("tbody",null,[(l(!0),s(v,null,b(d.products,(e=>(l(),s(u,{key:e.id,product:e},null,8,["product"])))),128))])])],64)};const te={props:{type:{type:String,default:"text"},icon:{type:String,default:""},placeholder:{type:String,default:""},modelValue:{required:!0},label:{type:String,default:""},blur:{type:Function,default:()=>{}},focus:{type:Function,default:()=>{}},readonly:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,a){const l=t(null);return{handleInput:e=>{a.emit("update:modelValue",e.target.value)},blur_:()=>{setTimeout(e.blur,200)},enter:()=>{l.value.blur()},inputRef:l}}},ae={class:"field"},le={key:0,class:"label"},se={key:0,class:"icon is-small is-left"};te.render=function(e,t,a,r,d,c){return l(),s("div",ae,[a.label?(l(),s("label",le,o(a.label),1)):y("",!0),n("div",{class:["control",{"has-icons-left":!!a.icon}]},[n("input",{ref:"inputRef",class:["input",{"has-text-right":"number"===a.type}],type:a.type,placeholder:a.placeholder,value:a.modelValue,onInput:t[1]||(t[1]=(...e)=>r.handleInput&&r.handleInput(...e)),onBlur:t[2]||(t[2]=(...e)=>r.blur_&&r.blur_(...e)),onFocus:t[3]||(t[3]=(...e)=>a.focus&&a.focus(...e)),onKeypress:t[4]||(t[4]=f(((...e)=>r.enter&&r.enter(...e)),["enter"])),readonly:a.readonly},null,42,["type","placeholder","value","readonly"]),a.icon?(l(),s("span",se,[n("i",{class:`fas ${a.icon}`},null,2)])):y("",!0)],2)])};const ne={components:{UnrequiredInput:te},props:["type","icon","placeholder","modelValue","label","time","blur","focus"],emits:["update:modelValue"],setup(e,a){let l=null;const s=t(e.modelValue);return x(e,(()=>{e.modelValue!==s.value&&(s.value=e.modelValue)})),x(s,(()=>{l&&clearTimeout(l),l=setTimeout((()=>{a.emit("update:modelValue",s.value)}),e.time||400)})),{value:s}}};ne.render=function(e,t,n,r,d,o){const c=a("UnrequiredInput");return l(),s(c,{type:n.type,icon:n.icon,placeholder:n.placeholder,label:n.label,modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=e=>r.value=e),blur:n.blur,focus:n.focus},null,8,["type","icon","placeholder","label","modelValue","blur","focus"])};const re={components:{DebounceInput:ne},props:{label:{type:String,default:"search"},placeholder:{type:String,default:""},actionName:{type:String,default:""},paramName:{type:String,default:"name"}},setup(e){const a=t(""),l=u(),s=k("t");x(a,(()=>{""!==e.actionName&&l.dispatch(e.actionName,{[e.paramName]:a.value})}));const n=h((()=>""!==e.label?s(e.label):"")),r=h((()=>""!==e.placeholder?s(e.placeholder):""));return{searchName:a,label:n,placeholder:r}}},de=g("data-v-2d748c2f");p("data-v-2d748c2f");const oe={class:"list-search"};m();const ce=de(((e,t,r,d,o,c)=>{const i=a("DebounceInput");return l(),s("div",oe,[n(i,{type:"text",modelValue:d.searchName,"onUpdate:modelValue":t[1]||(t[1]=e=>d.searchName=e),label:d.label,placeholder:d.placeholder},null,8,["modelValue","label","placeholder"])])}));re.render=ce,re.__scopeId="data-v-2d748c2f";const ie={components:{ListSearch:re}};ie.render=function(e,t,n,r,d,o){const c=a("ListSearch");return l(),s(c,{placeholder:"products.searchPlaceholder",actionName:"products/fetchProducts"})};const ue={components:{ProductList:W,ProductSearch:ie},inject:["t"]},pe={class:"table-page"},me={class:"has-text-right"};ue.render=function(e,t,c,i,u,p){const m=a("router-link"),h=a("ProductSearch"),v=a("ProductList");return l(),s("div",pe,[n("div",me,[n(m,{to:{name:"product-add"},class:"button is-info is-outlined"},{default:r((()=>[d(o(p.t("products.addButton")),1)])),_:1})]),n(h),n(v)])};const he={props:["type","icon","placeholder","modelValue","validate","label"],emits:["update:modelValue"],setup(e,a){const l=t(!1);return{invalid:l,handleInput:e=>{a.emit("update:modelValue",e.target.value)},validateInput:()=>{e.validate&&(l.value=e.validate(e.modelValue)),""===e.modelValue&&(l.value=!0)}}}},ve={class:"field"},be={key:0,class:"label"},ge={key:0,class:"icon is-small is-left"},ye={key:1,class:"icon is-small is-right has-text-danger"},fe=n("i",{class:"fas fa-exclamation-circle"},null,-1);he.render=function(e,t,a,r,d,c){return l(),s("div",ve,[a.label?(l(),s("label",be,o(a.label),1)):y("",!0),n("div",{class:["control",{"has-icons-left":!!a.icon,"has-icons-right":r.invalid}]},[n("input",{class:["input",{"is-danger":r.invalid,"has-text-right":"number"===a.type}],type:a.type,placeholder:a.placeholder,value:a.modelValue,onInput:t[1]||(t[1]=(...e)=>r.handleInput&&r.handleInput(...e)),onBlur:t[2]||(t[2]=(...e)=>r.validateInput&&r.validateInput(...e)),onFocus:t[3]||(t[3]=e=>r.invalid=!1),required:""},null,42,["type","placeholder","value"]),a.icon?(l(),s("span",ge,[n("i",{class:`fas ${a.icon}`},null,2)])):y("",!0),r.invalid?(l(),s("span",ye,[fe])):y("",!0)],2)])};const xe={components:{RequiredInput:he},inject:["t"],setup(){const e=t(""),a=t(""),l=u();return{name:e,description:a,onSubmit:async()=>{await l.dispatch("products/addProduct",{name:e.value.trim().toLowerCase(),description:a.value})}}}},ke=g("data-v-c548ca42");p("data-v-c548ca42");const Pe={class:"title is-4 has-text-centered"},Ie={class:"field"},we={class:"label"},Ve={class:"control"},Ce={class:"field is-grouped is-grouped-centered"},Ue={class:"control"},Se={class:"control"};m();const _e=ke(((e,t,r,c,i,u)=>{const p=a("RequiredInput"),m=a("router-link");return l(),s(v,null,[n("h4",Pe,o(u.t("products.addTitle")),1),n("form",{onSubmit:t[3]||(t[3]=w(((...e)=>c.onSubmit&&c.onSubmit(...e)),["prevent"]))},[n(p,{label:u.t("products.name"),placeholder:u.t("products.namePlaceholder"),modelValue:c.name,"onUpdate:modelValue":t[1]||(t[1]=e=>c.name=e),type:"text"},null,8,["label","placeholder","modelValue"]),n("div",Ie,[n("label",we,o(u.t("products.description")),1),n("div",Ve,[P(n("textarea",{class:"textarea",placeholder:u.t("products.descriptionPlaceholder"),"onUpdate:modelValue":t[2]||(t[2]=e=>c.description=e)},null,8,["placeholder"]),[[I,c.description]])])]),n("div",Ce,[n("div",Ue,[n("button",{type:"submit",class:"button is-info",style:{width:"100px"},disabled:!c.name},o(u.t("add")),9,["disabled"])]),n("div",Se,[n(m,{to:{name:"products"},class:"button is-link is-light",style:{width:"100px"}},{default:ke((()=>[d(o(u.t("cancel")),1)])),_:1})])])],32)],64)}));xe.render=_e,xe.__scopeId="data-v-c548ca42";const Te={props:["placeholder","modelValue","label"],emits:["update:modelValue"],setup(e,a){const{n:l,locale:s}=c(),n=t(null);V((()=>{n.value.value=l(parseFloat(e.modelValue||0),"currency")})),x(e,(()=>{const t=n.value.value.length,a=n.value.selectionStart,s=l(parseFloat(e.modelValue),"currency"),r=a+s.length-t;n.value.value=s,n.value.setSelectionRange(r,r)}));return{handleInput:e=>{let t=e.target.value;"vi"===s.value&&(t=t.replace(/\./g,""),t=t.replace(/,/g,".")),t=t.replace(/,/g,""),t=t.replace(/[^\d.]/g,""),a.emit("update:modelValue",t)},inputRef:n}}},Ee={class:"field"},Oe={key:0,class:"label"},Ne={class:"control"};Te.render=function(e,t,a,r,d,c){return l(),s("div",Ee,[a.label?(l(),s("label",Oe,o(a.label),1)):y("",!0),n("div",Ne,[n("input",{ref:"inputRef",class:"input has-text-right",type:"text",placeholder:a.placeholder,onInput:t[1]||(t[1]=(...e)=>r.handleInput&&r.handleInput(...e)),required:""},null,40,["placeholder"])])])};const De={components:{RequiredInput:he,Currency:Te},props:["unit"],inject:["t","n"],setup(e){const a=t(!1),l=t(e.unit.name),s=t(e.unit.price),n=u();return{isEditing:a,name:l,price:s,deactivate:()=>{n.dispatch("products/deactivateUnit",e.unit.id)},activate:()=>{n.dispatch("products/activateUnit",e.unit.id)},save:async()=>{l.value&&s.value&&(await n.dispatch("products/editUnit",{unitId:e.unit.id,payload:{name:l.value,price:s.value}}),a.value=!1)}}}},Le=g("data-v-23aee3a9");p("data-v-23aee3a9");const qe={class:"has-text-right"},Be={key:0,class:"v-align has-text-centered"},Re={key:1,class:"has-text-centered"},je={key:2,colspan:"2",class:"has-text-centered"},Fe={key:3,class:"v-align"},$e={key:4};m();const Ae=Le(((e,t,r,d,c,i)=>{const u=a("RequiredInput"),p=a("Currency");return l(),s("tr",null,[n("td",null,[d.isEditing?(l(),s(u,{key:0,type:"text",modelValue:d.name,"onUpdate:modelValue":t[1]||(t[1]=e=>d.name=e),placeholder:i.t("units.namePlaceholder")},null,8,["modelValue","placeholder"])):(l(),s("span",{key:1,class:{deleted:!r.unit.active}},o(r.unit.name),3))]),n("td",qe,[d.isEditing?(l(),s(p,{key:0,modelValue:d.price,"onUpdate:modelValue":t[2]||(t[2]=e=>d.price=e),placeholder:i.t("units.pricePlaceholder")},null,8,["modelValue","placeholder"])):(l(),s("span",{key:1,class:{deleted:!r.unit.active}},o(i.n(parseFloat(r.unit.price),"currency")),3))]),d.isEditing?(l(),s("td",Be,[n("button",{class:"button is-small is-info has-text-weight-medium",onClick:t[3]||(t[3]=(...e)=>d.save&&d.save(...e)),title:i.t("save")},"Lưu",8,["title"])])):r.unit.active?(l(),s("td",Re,[n("button",{class:"button is-small is-info has-text-weight-medium",onClick:t[4]||(t[4]=e=>d.isEditing=!0),title:i.t("edit")},"Sửa",8,["title"])])):(l(),s("td",je,[n("span",{onClick:t[5]||(t[5]=(...e)=>d.activate&&d.activate(...e)),class:"button is-small is-primary has-text-black has-text-weight-medium",title:i.t("recover")},"Phục hồi",8,["title"])])),d.isEditing?(l(),s("td",Fe,[n("button",{onClick:t[6]||(t[6]=e=>d.isEditing=!1),class:"button is-small is-dark has-text-weight-medium",title:i.t("cancel")},"Hủy",8,["title"])])):r.unit.active?(l(),s("td",$e,[n("button",{onClick:t[7]||(t[7]=(...e)=>d.deactivate&&d.deactivate(...e)),class:"button is-small is-danger has-text-weight-medium",title:i.t("delete")},"Xóa",8,["title"])])):y("",!0)])}));De.render=Ae,De.__scopeId="data-v-23aee3a9";const Me={components:{RequiredInput:he,Unit:De,Currency:Te},props:["productId","units"],inject:["t"],setup(e){const a=t(""),l=t(0),s=u();return{name:a,price:l,click:async()=>{await s.dispatch("products/addUnit",{product:e.productId,name:a.value,price:l.value}),a.value="",l.value=0}}}},He=g("data-v-35867556");p("data-v-35867556");const ze={class:"title is-5 has-text-centered"},Ke={class:"table is-bordered"},Ge={class:"has-text-centered"},Xe={colspan:"2"},Qe={colspan:"2",class:"has-text-centered"};m();const Je=He(((e,t,r,d,c,i)=>{const u=a("Unit"),p=a("RequiredInput"),m=a("Currency");return l(),s(v,null,[n("h5",ze,o(i.t("units.title")),1),n("table",Ke,[n("thead",null,[n("tr",Ge,[n("th",null,o(i.t("units.name")),1),n("th",null,o(i.t("units.price")),1),n("th",Xe,o(i.t("units.action")),1)])]),n("tbody",null,[(l(!0),s(v,null,b(r.units,(e=>(l(),s(u,{key:e.id,unit:e},null,8,["unit"])))),128)),n("tr",null,[n("td",null,[n(p,{type:"text",placeholder:i.t("units.namePlaceholder"),modelValue:d.name,"onUpdate:modelValue":t[1]||(t[1]=e=>d.name=e)},null,8,["placeholder","modelValue"])]),n("td",null,[n(m,{modelValue:d.price,"onUpdate:modelValue":t[2]||(t[2]=e=>d.price=e),placeholder:i.t("units.pricePlaceholder")},null,8,["modelValue","placeholder"])]),n("td",Qe,[n("button",{disabled:!d.name||!d.price,onClick:t[3]||(t[3]=(...e)=>d.click&&d.click(...e)),class:"button is-info"},o(i.t("add")),9,["disabled"])])])])])],64)}));Me.render=Je,Me.__scopeId="data-v-35867556";const We={components:{Units:Me,RequiredInput:he},inject:["t"],setup(){const e=C(),a=u(),l=t(!1),s=t(""),n=t("");i((()=>{a.dispatch("products/fetchProduct",e.params.id)}));const r=h((()=>a.getters["products/product"]));x(r,(()=>{s.value=r.value.name,n.value=r.value.description}));const d=h((()=>{var e;return(null==(e=r.value)?void 0:e.active)?"":"deleted"}));return{product:r,isEditing:l,name:s,description:n,save:async()=>{s.value&&(await a.dispatch("products/editProduct",{name:s.value,description:n.value}),l.value=!1)},activate:async()=>{await a.dispatch("products/activateProduct")},deactivate:async()=>{await a.dispatch("products/deactivateProduct")},deleted:d}}},Ye=g("data-v-9a55e474");p("data-v-9a55e474");const Ze={class:"title is-3 has-text-centered"},et={class:"table is-bordered"},tt={class:"has-text-centered"},at={key:0,class:"control"},lt={key:0,class:"has-text-centered button-group"},st={key:1,class:"has-text-centered button-group"},nt={key:2,class:"has-text-centered button-group"};m();const rt=Ye(((e,t,r,d,c,i)=>{var u,p,m,h,b,g;const f=a("RequiredInput"),x=a("Units");return l(),s(v,null,[n("h3",Ze,o(i.t("products.detailTitle")),1),n("table",et,[n("tbody",null,[n("tr",null,[n("th",null,o(i.t("products.name")),1),n("td",tt,[d.isEditing?(l(),s(f,{key:0,type:"text",modelValue:d.name,"onUpdate:modelValue":t[1]||(t[1]=e=>d.name=e),placeholder:i.t("products.namePlaceholder")},null,8,["modelValue","placeholder"])):(l(),s("strong",{key:1,class:["is-capitalized",d.deleted]},o(null==(u=d.product)?void 0:u.name),3))])]),n("tr",null,[n("th",null,o(i.t("products.description")),1),n("td",null,[d.isEditing?(l(),s("div",at,[P(n("textarea",{class:"textarea",placeholder:i.t("products.descriptionPlaceholder"),"onUpdate:modelValue":t[2]||(t[2]=e=>d.description=e)},null,8,["placeholder"]),[[I,d.description]])])):(l(),s("span",{key:1,class:d.deleted},o(null==(p=d.product)?void 0:p.description),3))])])])]),(null==(m=d.product)?void 0:m.active)?d.isEditing?(l(),s("div",st,[n("button",{onClick:t[4]||(t[4]=(...e)=>d.save&&d.save(...e)),class:"button is-info mx-5"},o(i.t("save")),1),n("button",{onClick:t[5]||(t[5]=e=>d.isEditing=!1),class:"button mx-5"},o(i.t("cancel")),1)])):(l(),s("div",nt,[n("button",{onClick:t[6]||(t[6]=e=>d.isEditing=!0),class:"button is-info mx-5"},o(i.t("edit")),1),n("button",{onClick:t[7]||(t[7]=(...e)=>d.deactivate&&d.deactivate(...e)),class:"button is-danger mx-5"},o(i.t("delete")),1)])):(l(),s("div",lt,[n("button",{onClick:t[3]||(t[3]=(...e)=>d.activate&&d.activate(...e)),class:"button is-info"},o(i.t("recover")),1)])),(null==(h=d.product)?void 0:h.active)?(l(),s(x,{key:3,productId:null==(b=d.product)?void 0:b.id,units:null==(g=d.product)?void 0:g.units},null,8,["productId","units"])):y("",!0)],64)}));We.render=rt,We.__scopeId="data-v-9a55e474";var dt=[{path:"/",name:"home",component:ue},{path:"/products",name:"products",component:ue},{path:"/products/add",name:"product-add",component:xe},{path:"/products/:id",name:"product-detail",component:We}];const ot={props:["customer"],inject:["n"]},ct=g("data-v-45c66e27");p("data-v-45c66e27");const it={class:"is-capitalized"},ut={class:"has-text-center"},pt={class:"ellipsis"},mt={class:"has-text-right"};m();const ht=ct(((e,t,r,d,c,i)=>{const u=a("router-link");return l(),s("tr",null,[n("td",null,[n(u,{to:{name:"customer-detail",params:{id:r.customer.id}}},{default:ct((()=>[n("span",it,o(r.customer.name),1)])),_:1},8,["to"])]),n("td",ut,[n("span",null,o(r.customer.phone),1)]),n("td",pt,[n("span",null,o(r.customer.address),1)]),n("td",mt,o(i.n(parseFloat(r.customer.debt),"currency")),1)])}));ot.render=ht,ot.__scopeId="data-v-45c66e27";const vt={components:{CustomerRow:ot},inject:["t"],setup(){const e=u();i((()=>{e.dispatch("customers/fetchCustomers")}));return{customers:h((()=>e.getters["customers/customers"]))}}},bt={class:"title is-4 has-text-centered mt-2"},gt={class:"table is-bordered mb-5"},yt={class:"has-text-centered"},ft={style:{width:"110px"}},xt={style:{width:"130px"}};vt.render=function(e,t,r,d,c,i){const u=a("CustomerRow");return l(),s(v,null,[n("h4",bt,o(i.t("customers.list")),1),n("table",gt,[n("thead",null,[n("tr",yt,[n("th",null,o(i.t("customers.table.customer")),1),n("th",ft,o(i.t("customers.table.phone")),1),n("th",null,o(i.t("customers.table.address")),1),n("th",xt,o(i.t("customers.table.debt")),1)])]),n("tbody",null,[(l(!0),s(v,null,b(d.customers,(e=>(l(),s(u,{key:e.id,customer:e},null,8,["customer"])))),128))])])],64)};const kt={components:{ListSearch:re}};kt.render=function(e,t,n,r,d,o){const c=a("ListSearch");return l(),s(c,{placeholder:"customers.searchPlaceholder",actionName:"customers/fetchCustomers"})};const Pt={components:{CustomerList:vt,CustomerSearch:kt},inject:["t","websiteTitle"],created(){document.title="Khách Hàng - "+this.websiteTitle}},It={class:"table-page"},wt={class:"has-text-right"};Pt.render=function(e,t,c,i,u,p){const m=a("router-link"),h=a("CustomerSearch"),v=a("CustomerList");return l(),s("div",It,[n("div",wt,[n(m,{to:{name:"customer-add"},class:"button is-info is-outlined"},{default:r((()=>[d(o(p.t("customers.addButton")),1)])),_:1})]),n(h),n(v)])};const Vt={props:["order"],inject:["t","n"],setup(e){const t=h((()=>parseFloat(e.order.subtotal)));return{total:h((()=>t.value+parseFloat(e.order.debt)))}}},Ct={class:"is-capitalized"},Ut={class:"has-text-centered"},St={class:"has-text-right"},_t={class:"has-text-right"},Tt={class:"has-text-centered"};Vt.render=function(e,t,d,c,i,u){const p=a("router-link");return l(),s("tr",null,[n("td",null,[n(p,{to:{name:"order-detail",params:{id:d.order.id}}},{default:r((()=>[n("span",Ct,o(d.order.customer_name),1)])),_:1},8,["to"])]),n("td",Ut,[n("span",null,o(new Date(d.order.created_at).toLocaleDateString()),1)]),n("td",St,[n("span",null,o(u.n(c.total,"currency")),1)]),n("td",_t,[n("span",null,o(u.n(parseFloat(d.order.payment),"currency")),1)]),n("td",Tt,o(u.t(`orders.status.${d.order.status}`)),1)])};const Et={components:{OrderRow:Vt},inject:["t"],setup(){const e=u();return{orders:h((()=>e.getters["orders/orders"]))}}},Ot={class:"title is-4 has-text-centered mt-2"},Nt={class:"table is-bordered mb-5"},Dt={class:"has-text-centered"},Lt={style:{width:"130px"}},qt={style:{width:"130px"}};Et.render=function(e,t,r,d,c,i){const u=a("OrderRow");return l(),s(v,null,[n("h4",Ot,o(i.t("orders.list")),1),n("table",Nt,[n("thead",null,[n("tr",Dt,[n("th",null,o(i.t("customers.table.customer")),1),n("th",null,o(i.t("orders.table.date")),1),n("th",Lt,o(i.t("orders.table.total")),1),n("th",qt,o(i.t("orders.table.payment")),1),n("th",null,o(i.t("orders.table.status")),1)])]),n("tbody",null,[(l(!0),s(v,null,b(d.orders,(e=>(l(),s(u,{key:e.id,order:e},null,8,["order"])))),128))])])],64)};const Bt={components:{Units:Me,RequiredInput:he,UnrequiredInput:te,OrderList:Et},inject:["t","n"],setup(){const e=C(),a=u(),l=t(!1),s=t(""),n=t(""),r=t(""),d=t(""),o=k("websiteTitle");i((async()=>{await a.dispatch("customers/fetchCustomer",e.params.id),await a.dispatch("orders/fetchOrders",{customer:a.getters["customers/customerName"]}),document.title=`${s.value} - ${o}`}));const c=h((()=>a.getters["customers/customer"]));x(c,(()=>{s.value=c.value.name,n.value=c.value.phone,r.value=c.value.address,d.value=c.value.description}));return{customer:c,isEditing:l,name:s,phone:n,address:r,description:d,save:async()=>{await a.dispatch("customers/editCustomer",{name:s.value,phone:n.value,address:r.value,description:d.value}),l.value=!1},addOrder:()=>{a.dispatch("orders/addOrder",{customer:a.getters["customers/customerId"]})}}}},Rt=g("data-v-2202d74a");p("data-v-2202d74a");const jt={class:"title is-3 has-text-centered"},Ft={class:"table is-bordered"},$t={class:"has-text-centered"},At={key:1,class:"is-capitalized"},Mt={class:"has-text-centered"},Ht={key:1},zt={key:1},Kt={key:0,class:"control"},Gt={key:1},Xt={key:0},Qt={class:"has-text-centered"},Jt={key:0,class:"has-text-centered button-group"},Wt={key:1,class:"has-text-centered button-group"};m();const Yt=Rt(((e,t,r,d,c,i)=>{var u,p,m,h,b;const g=a("RequiredInput"),f=a("UnrequiredInput"),x=a("OrderList");return l(),s(v,null,[n("h3",jt,o(i.t("customers.detailTitle")),1),n("table",Ft,[n("tbody",null,[n("tr",null,[n("th",null,o(i.t("customers.table.customer")),1),n("td",$t,[d.isEditing?(l(),s(g,{key:0,type:"text",modelValue:d.name,"onUpdate:modelValue":t[1]||(t[1]=e=>d.name=e),placeholder:i.t("customers.namePlaceholder")},null,8,["modelValue","placeholder"])):(l(),s("strong",At,o(null==(u=d.customer)?void 0:u.name),1))])]),n("tr",null,[n("th",null,o(i.t("customers.table.phone")),1),n("td",Mt,[d.isEditing?(l(),s(f,{key:0,type:"text",modelValue:d.phone,"onUpdate:modelValue":t[2]||(t[2]=e=>d.phone=e),placeholder:i.t("customers.phonePlaceholder")},null,8,["modelValue","placeholder"])):(l(),s("strong",Ht,o(null==(p=d.customer)?void 0:p.phone),1))])]),n("tr",null,[n("th",null,o(i.t("customers.table.address")),1),n("td",null,[d.isEditing?(l(),s(f,{key:0,type:"text",modelValue:d.address,"onUpdate:modelValue":t[3]||(t[3]=e=>d.address=e),placeholder:i.t("customers.addressPlaceholder")},null,8,["modelValue","placeholder"])):(l(),s("span",zt,o(null==(m=d.customer)?void 0:m.address),1))])]),n("tr",null,[n("th",null,o(i.t("customers.description")),1),n("td",null,[d.isEditing?(l(),s("div",Kt,[P(n("textarea",{class:"textarea",placeholder:i.t("customers.descriptionPlaceholder"),"onUpdate:modelValue":t[4]||(t[4]=e=>d.description=e)},null,8,["placeholder"]),[[I,d.description]])])):(l(),s("span",Gt,o(null==(h=d.customer)?void 0:h.description),1))])]),d.isEditing?y("",!0):(l(),s("tr",Xt,[n("th",null,o(i.t("customers.table.debt")),1),n("td",Qt,[n("strong",null,o(i.n(parseFloat((null==(b=d.customer)?void 0:b.debt)||0),"currency")),1)])]))])]),d.isEditing?(l(),s("div",Jt,[n("button",{onClick:t[5]||(t[5]=(...e)=>d.save&&d.save(...e)),disabled:!d.name,class:"button is-info mx-5"},o(i.t("save")),9,["disabled"]),n("button",{onClick:t[6]||(t[6]=e=>d.isEditing=!1),class:"button mx-5"},o(i.t("cancel")),1)])):(l(),s("div",Wt,[n("button",{onClick:t[7]||(t[7]=e=>d.isEditing=!0),class:"button is-info mx-5"},o(i.t("edit")),1),n("button",{onClick:t[8]||(t[8]=(...e)=>d.addOrder&&d.addOrder(...e)),class:"button is-info mx-5"},o(i.t("orders.addButton")),1)])),n(x)],64)}));Bt.render=Yt,Bt.__scopeId="data-v-2202d74a";const Zt={components:{RequiredInput:he,UnrequiredInput:te,Currency:Te},inject:["t"],setup(){const e=t(""),a=t(""),l=t(""),s=t(""),n=t(0),r=u();return{name:e,phone:a,address:l,description:s,debt:n,onSubmit:async()=>{console.log(e.value.trim().toLowerCase()),await r.dispatch("customers/addCustomer",{name:e.value.trim().toLowerCase(),phone:a.value,address:l.value,description:s.value,debt:n.value})}}}},ea=g("data-v-469b4494");p("data-v-469b4494");const ta={class:"title is-4 has-text-centered"},aa={class:"field"},la={class:"label"},sa={class:"control"},na={class:"field is-grouped is-grouped-centered"},ra={class:"control"},da={class:"control"};m();const oa=ea(((e,t,r,c,i,u)=>{const p=a("RequiredInput"),m=a("UnrequiredInput"),h=a("Currency"),b=a("router-link");return l(),s(v,null,[n("h4",ta,o(u.t("customers.addTitle")),1),n("form",{onSubmit:t[6]||(t[6]=w(((...e)=>c.onSubmit&&c.onSubmit(...e)),["prevent"]))},[n(p,{label:u.t("customers.table.customer"),placeholder:u.t("customers.namePlaceholder"),modelValue:c.name,"onUpdate:modelValue":t[1]||(t[1]=e=>c.name=e),isName:"",type:"text"},null,8,["label","placeholder","modelValue"]),n(m,{type:"text",label:u.t("customers.table.phone"),placeholder:u.t("customers.phonePlaceholder"),modelValue:c.phone,"onUpdate:modelValue":t[2]||(t[2]=e=>c.phone=e)},null,8,["label","placeholder","modelValue"]),n(m,{type:"text",label:u.t("customers.table.address"),placeholder:u.t("customers.addressPlaceholder"),modelValue:c.address,"onUpdate:modelValue":t[3]||(t[3]=e=>c.address=e)},null,8,["label","placeholder","modelValue"]),n("div",aa,[n("label",la,o(u.t("customers.description")),1),n("div",sa,[P(n("textarea",{class:"textarea",placeholder:u.t("customers.descriptionPlaceholder"),"onUpdate:modelValue":t[4]||(t[4]=e=>c.description=e)},null,8,["placeholder"]),[[I,c.description]])])]),n(h,{modelValue:c.debt,"onUpdate:modelValue":t[5]||(t[5]=e=>c.debt=e),label:u.t("customers.table.debt"),placeholder:u.t("customers.table.debt")},null,8,["modelValue","label","placeholder"]),n("div",na,[n("div",ra,[n("button",{type:"submit",class:"button is-info",style:{width:"100px"},disabled:!c.name},o(u.t("add")),9,["disabled"])]),n("div",da,[n(b,{to:{name:"customers"},class:"button is-link is-light",style:{width:"100px"}},{default:ea((()=>[d(o(u.t("cancel")),1)])),_:1})])])],32)],64)}));Zt.render=oa,Zt.__scopeId="data-v-469b4494";var ca=[{path:"/customers",name:"customers",component:Pt},{path:"/customers/add",name:"customer-add",component:Zt},{path:"/customers/:id",name:"customer-detail",component:Bt}];const ia={components:{ListSearch:re}};ia.render=function(e,t,n,r,d,o){const c=a("ListSearch");return l(),s(c,{placeholder:"orders.searchPlaceholder",actionName:"orders/fetchOrders",paramName:"customer"})};const ua={components:{OrderList:Et,OrderSearch:ia},inject:["t"],setup(){const e=u();i((()=>{e.dispatch("orders/fetchOrders")}))}},pa={class:"table-page"},ma={class:"has-text-right"};ua.render=function(e,t,c,i,u,p){const m=a("router-link"),h=a("OrderSearch"),v=a("OrderList");return l(),s("div",pa,[n("div",ma,[n(m,{to:{name:"order-add"},class:"button is-info is-outlined"},{default:r((()=>[d(o(p.t("orders.addButton")),1)])),_:1})]),n(h),n(v)])};const ha={components:{DebounceInput:ne},props:["label","placeholder","modelValue","getter","action","initial","paramName"],emits:["update:modelValue"],setup(e,a){const l=t(!1),s=t(!1),n=u(),r=t("");x(r,(()=>{n.dispatch(e.action,{[e.paramName]:r.value})})),i((()=>{n.dispatch(e.action),setTimeout((()=>{e.initial&&o(e.initial)}),300)}));const d=h((()=>n.getters[e.getter])),o=e=>{const t=d.value.find((t=>e===t.id||t.name.toLowerCase()===r.value.toLowerCase()));t?(r.value=t.name,l.value=!1,a.emit("update:modelValue",t.id)):(l.value=!0,a.emit("update:modelValue",null))};return{invalid:l,suggestions:d,isFocusing:s,focus:()=>{l.value=!1,s.value=!0},blur:()=>{""===r.value&&(l.value=!0),s.value&&(o(null),s.value=!1)},value:r,click:e=>{o(e),s.value=!1}}}},va=g("data-v-51b3d95a");p("data-v-51b3d95a");const ba={class:"suggestion-wrapper"},ga={key:0,class:"suggestions"};m();const ya=va(((e,t,r,d,c,i)=>{const u=a("debounce-input");return l(),s("div",ba,[n(u,{label:r.label,placeholder:r.placeholder,type:"text",modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),focus:d.focus,blur:d.blur},null,8,["label","placeholder","modelValue","focus","blur"]),d.isFocusing?(l(),s("div",ga,[n("div",null,[(l(!0),s(v,null,b(d.suggestions,(e=>(l(),s("strong",{class:"suggestion is-capitalized",key:e.id,onClick:w((t=>d.click(e.id,e.name)),["stop"])},o(e.name),9,["onClick"])))),128))])])):y("",!0)])}));ha.render=ya,ha.__scopeId="data-v-51b3d95a";const fa={props:["title"],emits:["close"],setup:(e,t)=>({close:()=>{t.emit("close")}})},xa=g("data-v-fd5feb1e");p("data-v-fd5feb1e");const ka={class:"modal is-active"},Pa={class:"modal-content"},Ia={class:"box"},wa={class:"control has-icons-right"},Va={class:"title is-4 has-text-centered"},Ca=n("i",{class:"fas fa-times-circle"},null,-1),Ua=n("hr",{class:"mb-3"},null,-1);m();const Sa=xa(((e,t,a,r,d,c)=>(l(),s(S,{to:"body"},[n("div",ka,[n("div",{class:"modal-background",onClick:t[1]||(t[1]=(...e)=>r.close&&r.close(...e))}),n("div",Pa,[n("div",Ia,[n("div",wa,[n("h4",Va,o(a.title),1),n("span",{class:"icon is-small is-right",onClick:t[2]||(t[2]=(...e)=>r.close&&r.close(...e))},[Ca])]),Ua,U(e.$slots,"default")])])])]))));fa.render=Sa,fa.__scopeId="data-v-fd5feb1e";const _a={props:["title","detail"],emits:["save","close"],components:{RequiredInput:he,UnrequiredInput:te,Suggestion:ha,BaseModal:fa,Currency:Te},inject:["t"],setup(e,a){var l,s,n,r,d;const o=u(),c=t(null==(l=e.detail)?void 0:l.product_id),i=t(null==(s=e.detail)?void 0:s.unit),p=t(null==(n=e.detail)?void 0:n.quantity),m=t((null==(r=e.detail)?void 0:r.price)||0),v=t((null==(d=e.detail)?void 0:d.ready)||!1),b=k("n"),g=h((()=>{if(c.value){const e=o.getters["products/products"].find((e=>e.id===c.value));if(e)return e.units}return[]}));x(g,(()=>{var e,t;1===(null==(e=g.value)?void 0:e.length)?i.value=g.value[0].id:(null==(t=g.value)?void 0:t.length)>1?void 0===g.value.find((e=>e.id===i.value))&&(i.value=0):i.value=0})),x(i,(()=>{var e;if(i.value>0){const t=null==(e=g.value)?void 0:e.find((e=>e.id===i.value));m.value=t?t.price:0}else m.value=0}));const y=h((()=>m.value&&p.value>0?b(m.value*p.value,"currency"):b(0,"currency"))),f=h((()=>!(i.value>0&&p.value>0&&m.value>0)));return{product:c,unit:i,price:m,quantity:p,cost:y,ready:v,isInvalid:f,units:g,save:()=>{a.emit("save",{unit:i.value,quantity:p.value,price:m.value,ready:v.value})},close:()=>{a.emit("close")}}}},Ta=g("data-v-3b717ea6");p("data-v-3b717ea6");const Ea={class:"table is-bordered"},Oa={style:{"max-width":"330px"}},Na={value:0},Da={key:1},La={class:"has-text-right pr-5"},qa={class:"has-text-centered"},Ba={class:"field is-grouped is-justify-content-center"},Ra={class:"control"},ja={class:"control"};m();const Fa=Ta(((e,t,r,d,c,i)=>{const u=a("Suggestion"),p=a("Currency"),m=a("RequiredInput"),h=a("BaseModal");return l(),s(h,{title:r.title,onClose:d.close},{default:Ta((()=>[n("form",{onSubmit:t[7]||(t[7]=w(((...e)=>d.save&&d.save(...e)),["prevent"]))},[n("table",Ea,[n("tbody",null,[n("tr",null,[n("th",null,o(i.t("products.table.product")),1),n("td",Oa,[n(u,{placeholder:i.t("products.namePlaceholder"),action:"products/fetchProducts",getter:"products/products",modelValue:d.product,"onUpdate:modelValue":t[1]||(t[1]=e=>d.product=e),initial:d.product,paramName:"name"},null,8,["placeholder","modelValue","initial"])])]),n("tr",null,[n("th",null,o(i.t("products.table.unit")),1),n("td",null,[d.units.length>1?(l(),s("div",{key:0,class:["select is-success",{"is-danger":0===d.unit}]},[P(n("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>d.unit=e)},[n("option",Na,o(i.t("orders.details.select")),1),(l(!0),s(v,null,b(d.units,(e=>(l(),s("option",{key:e.id,value:e.id},o(e.name),9,["value"])))),128))],512),[[_,d.unit]])],2)):d.units.length>0?(l(),s("span",Da,o(d.units[0].name),1)):y("",!0)])]),n("tr",null,[n("th",null,o(i.t("products.table.price")),1),n("td",null,[n(p,{modelValue:d.price,"onUpdate:modelValue":t[3]||(t[3]=e=>d.price=e),placeholder:i.t("units.pricePlaceholder")},null,8,["modelValue","placeholder"])])]),n("tr",null,[n("th",null,o(i.t("orders.details.quantity")),1),n("td",null,[n(m,{type:"number",placeholder:i.t("orders.quantityPlaceholder"),modelValue:d.quantity,"onUpdate:modelValue":t[4]||(t[4]=e=>d.quantity=e)},null,8,["placeholder","modelValue"])])]),n("tr",null,[n("th",null,o(i.t("orders.details.cost")),1),n("td",La,o(d.cost),1)]),n("tr",null,[n("th",null,o(i.t("orders.details.ready")),1),n("td",qa,[P(n("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=e=>d.ready=e)},null,512),[[T,d.ready]])])])])]),n("div",Ba,[n("div",Ra,[n("button",{type:"submit",disabled:d.isInvalid,class:"button is-link"},o(i.t("save")),9,["disabled"])]),n("div",ja,[n("button",{type:"button",onClick:t[6]||(t[6]=w(((...e)=>d.close&&d.close(...e)),["stop"])),class:"button is-link is-light"},o(i.t("cancel")),1)])])],32)])),_:1},8,["title","onClose"])}));_a.render=Fa,_a.__scopeId="data-v-3b717ea6";const $a={components:{OrderDetailModal:_a},props:["detail"],inject:["t","n"],setup(e){const a=t(!1),l=u();return{showEdit:a,toggleEdit:()=>{a.value=!a.value},edit:async t=>{await l.dispatch("orders/editDetail",{id:e.detail.id,payload:t}),a.value=!1}}}},Aa=g("data-v-15afd51d");p("data-v-15afd51d");const Ma=n("i",{class:"fas fa-check"},null,-1),Ha={class:"has-text-centered"},za={class:"has-text-right hide-on-small"},Ka={class:"has-text-right"},Ga={class:"has-text-right"},Xa={class:"has-text-centered has-text-info"};m();const Qa=Aa(((e,t,r,d,c,i)=>{const u=a("OrderDetailModal");return l(),s(v,null,[n("tr",null,[n("td",null,[r.detail.ready?(l(),s("span",{key:0,class:"icon has-text-primary",title:i.t("orders.details.ready")},[Ma],8,["title"])):y("",!0),n("span",null,o(r.detail.product_name),1)]),n("td",Ha,[n("span",null,o(r.detail.unit_name),1)]),n("td",za,o(i.n(parseFloat(r.detail.price||0),"currency")),1),n("td",Ka,o(r.detail.quantity),1),n("td",Ga,o(i.n(r.detail.cost,"currency")),1),n("td",Xa,[n("button",{title:i.t("edit"),onClick:t[1]||(t[1]=(...e)=>d.toggleEdit&&d.toggleEdit(...e)),class:"button is-small is-info has-text-weight-medium"},"Sửa",8,["title"])])]),d.showEdit?(l(),s(u,{key:0,title:i.t("orders.details.editTitle"),detail:r.detail,onClose:d.toggleEdit,onSave:d.edit},null,8,["title","detail","onClose","onSave"])):y("",!0)],64)}));$a.render=Qa,$a.__scopeId="data-v-15afd51d";const Ja={components:{RequiredInput:he,OrderDetail:$a,OrderDetailModal:_a},props:["orderId","details"],inject:["t"],setup(a){const l=t(""),s=t(0),n=t(!1),r=u();return{name:l,price:s,showAdd:n,toggleAdd:()=>{n.value=!n.value},click:async()=>{await r.dispatch("products/addOrderDetail",{product:a.productId,name:l.value,price:s.value}),l.value="",s.value=0},addDetail:async t=>{await r.dispatch("orders/addDetail",e({order:a.orderId},t)),n.value=!1}}}},Wa=g("data-v-00e8d86c");p("data-v-00e8d86c");const Ya={class:"title is-5 has-text-centered"},Za={class:"table is-bordered"},el={class:"has-text-centered"},tl={class:"hide-on-small"},al={style:{width:"50px"}},ll={class:"has-text-centered has-text-primary is-size-2"},sl=n("i",{class:"fas fa-plus-circle"},null,-1);m();const nl=Wa(((e,t,r,d,c,i)=>{const u=a("OrderDetail"),p=a("OrderDetailModal");return l(),s(v,null,[n("h5",Ya,o(i.t("orders.details.title")),1),n("table",Za,[n("thead",null,[n("tr",el,[n("th",null,o(i.t("products.name")),1),n("th",null,o(i.t("products.table.unit")),1),n("th",tl,o(i.t("products.table.price")),1),n("th",null,o(i.t("orders.details.quantity")),1),n("th",null,o(i.t("orders.details.cost")),1),n("th",al,o(i.t("orders.details.edit")),1)])]),n("tbody",null,[(l(!0),s(v,null,b(r.details,(e=>(l(),s(u,{key:e.id,detail:e},null,8,["detail"])))),128))])]),n("div",ll,[n("span",{onClick:t[1]||(t[1]=(...e)=>d.toggleAdd&&d.toggleAdd(...e)),title:i.t("orders.details.add"),class:"icon"},[sl],8,["title"])]),d.showAdd?(l(),s(p,{key:0,title:i.t("orders.details.add"),onClose:d.toggleAdd,onSave:d.addDetail},null,8,["title","onClose","onSave"])):y("",!0)],64)}));Ja.render=nl,Ja.__scopeId="data-v-00e8d86c";const rl={emits:["close"],inject:["t"],components:{BaseModal:fa,Currency:Te},setup(e,a){const l=u(),s=t(0),n=()=>{a.emit("close")};V((()=>{s.value=l.getters["orders/payment"]}));const r=h((()=>!(s.value>=0)));return{save:async()=>{await l.dispatch("orders/editOrder",{payment:s.value}),n()},close:n,payment:s,isInvalid:r}}},dl=g("data-v-559dee14");p("data-v-559dee14");const ol={class:"table is-bordered"},cl={class:"field is-grouped is-justify-content-center"},il={class:"control"},ul={class:"control"};m();const pl=dl(((e,t,r,d,c,i)=>{const u=a("Currency"),p=a("BaseModal");return l(),s(p,{title:i.t("orders.payment.title"),onClose:d.close},{default:dl((()=>[n("form",{onSubmit:t[3]||(t[3]=w(((...e)=>d.save&&d.save(...e)),["prevent"]))},[n("table",ol,[n("tbody",null,[n("tr",null,[n("th",null,o(i.t("orders.payment.payment")),1),n("td",null,[n(u,{placeholder:i.t("orders.paymentPlaceholder"),modelValue:d.payment,"onUpdate:modelValue":t[1]||(t[1]=e=>d.payment=e)},null,8,["placeholder","modelValue"])])])])]),n("div",cl,[n("div",il,[n("button",{type:"submit",disabled:d.isInvalid,class:"button is-link"},o(i.t("save")),9,["disabled"])]),n("div",ul,[n("button",{type:"button",onClick:t[2]||(t[2]=w(((...e)=>d.close&&d.close(...e)),["stop"])),class:"button is-link is-light"},o(i.t("cancel")),1)])])],32)])),_:1},8,["title","onClose"])}));rl.render=pl,rl.__scopeId="data-v-559dee14";const ml={components:{OrderDetails:Ja,RequiredInput:he,UnrequiredInput:te,PaymentModal:rl},inject:["t","n"],setup(){const e=C(),a=u(),l=t(!1),s=k("websiteTitle"),n=h((()=>a.getters["orders/order"])),r=h((()=>a.getters["orders/customer"])),d=h((()=>a.getters["orders/subtotal"])),o=h((()=>n.value?parseFloat(n.value.debt)+d.value:0));i((()=>{a.dispatch("orders/fetchOrder",e.params.id)})),x(r,(()=>{document.title=`${r.value.name} - ${s}`}));const c=h((()=>n.value?o.value-parseFloat(n.value.payment):0));return{order:n,customer:r,subtotal:d,total:o,remain:c,showPayment:l,togglePayment:()=>{l.value=!l.value}}}},hl=g("data-v-384fa1f4");p("data-v-384fa1f4");const vl={class:"title is-3 has-text-centered"},bl={class:"table is-bordered"},gl={class:"has-text-centered is-capitalized"},yl={class:"has-text-centered"},fl={class:"has-text-centered"},xl={class:"has-text-centered"},kl={class:"has-text-centered"},Pl={class:"has-text-centered"},Il={class:"has-text-centered"},wl={class:"has-text-centered"},Vl={key:0},Cl={class:"has-text-centered mb-5 pb-4"};m();const Ul=hl(((e,t,r,c,i,u)=>{var p,m,h,b,g;const f=a("router-link"),x=a("OrderDetails"),k=a("PaymentModal");return l(),s(v,null,[n("h3",vl,o(u.t("orders.detailTitle")),1),n("table",bl,[n("tbody",null,[n("tr",null,[n("th",null,o(u.t("customers.table.customer")),1),n("td",gl,[n(f,{to:{name:"customer-detail",params:{id:null==(p=c.customer)?void 0:p.id}}},{default:hl((()=>{var e;return[d(o(null==(e=c.customer)?void 0:e.name),1)]})),_:1},8,["to"])])]),n("tr",null,[n("th",null,o(u.t("customers.table.phone")),1),n("td",yl,[n("strong",null,o(null==(m=c.customer)?void 0:m.phone),1)])]),n("tr",null,[n("th",null,o(u.t("customers.table.address")),1),n("td",null,[n("span",null,o(null==(h=c.customer)?void 0:h.address),1)])]),n("tr",null,[n("th",null,o(u.t("customers.table.debt")),1),n("td",fl,[n("strong",null,o(u.n(parseFloat((null==(b=c.order)?void 0:b.debt)||0),"currency")),1)])]),n("tr",null,[n("th",null,o(u.t("orders.table.subtotal")),1),n("td",xl,[n("strong",null,o(u.n(c.subtotal,"currency")),1)])]),n("tr",null,[n("th",null,o(u.t("orders.table.total")),1),n("td",kl,[n("strong",null,o(u.n(c.total,"currency")),1)])]),n("tr",null,[n("th",null,o(u.t("orders.table.payment")),1),n("td",Pl,[n("strong",null,o(u.n(parseFloat((null==(g=c.order)?void 0:g.payment)||0),"currency")),1)])]),n("tr",null,[n("th",null,o(u.t("orders.table.remain")),1),n("td",Il,[n("strong",null,o(u.n(c.remain,"currency")),1)])]),n("tr",null,[n("th",null,o(u.t("orders.table.status")),1),n("td",wl,[c.order?(l(),s("strong",Vl,o(u.t(`orders.status.${c.order.status}`)),1)):y("",!0)])])])]),n("div",Cl,[n("button",{onClick:t[1]||(t[1]=(...e)=>c.togglePayment&&c.togglePayment(...e)),class:"button is-info is-outlined"},o(u.t("orders.pay")),1)]),c.order?(l(),s(x,{key:0,orderId:c.order.id,details:c.order.details},null,8,["orderId","details"])):y("",!0),c.showPayment?(l(),s(k,{key:1,onClose:c.togglePayment},null,8,["onClose"])):y("",!0)],64)}));ml.render=Ul,ml.__scopeId="data-v-384fa1f4";const Sl={components:{Suggestion:ha},inject:["t"],setup(){const e=C(),a=u(),l=t(null),s=h((()=>{const t=parseInt(e.query.customer);return isNaN(t)?null:t}));return{submit:()=>{l.value&&a.dispatch("orders/addOrder",{customer:l.value})},customer:l,initial:s}}},_l=g("data-v-41f1e654");p("data-v-41f1e654");const Tl={class:"title is-4 has-text-centered"},El={class:"has-text-centered mt-5 pt-3"};m();const Ol=_l(((e,t,r,d,c,i)=>{const u=a("Suggestion");return l(),s(v,null,[n("h4",Tl,o(i.t("orders.addButton")),1),n("form",{onSubmit:t[2]||(t[2]=w(((...e)=>d.submit&&d.submit(...e)),["prevent"]))},[n(u,{action:"customers/fetchCustomers",getter:"customers/customers",initial:d.initial,modelValue:d.customer,"onUpdate:modelValue":t[1]||(t[1]=e=>d.customer=e),placeholder:i.t("customers.namePlaceholder"),label:i.t("customers.table.customer"),paramName:"name"},null,8,["initial","modelValue","placeholder","label"]),n("div",El,[n("button",{disabled:!d.customer,type:"submit",class:"button is-info is-outlined"},o(i.t("orders.addButton")),9,["disabled"])])],32)],64)}));Sl.render=Ol,Sl.__scopeId="data-v-41f1e654";var Nl=[{path:"/orders",name:"orders",component:ua},{path:"/orders/add",name:"order-add",component:Sl},{path:"/orders/:id",name:"order-detail",component:ml}];const Dl={inject:["t"],setup(){const e=u();return{language:h((()=>e.getters.language)),change:t=>{e.dispatch("changeLanguage",t.target.value)}}}},Ll=g("data-v-306df169");p("data-v-306df169");const ql={class:"title is-3 has-text-centered"},Bl={class:"language"},Rl={class:"select"},jl=n("option",{value:"en"},"English",-1),Fl=n("option",{value:"vi"},"Tiếng Việt",-1);m();const $l=Ll(((e,t,a,r,d,c)=>(l(),s(v,null,[n("h3",ql,o(c.t("settings.title")),1),n("div",Bl,[n("p",null,[n("strong",null,o(c.t("settings.selectLanguage")),1)]),n("div",Rl,[n("select",{value:r.language,onChange:t[1]||(t[1]=(...e)=>r.change&&r.change(...e))},[jl,Fl],40,["value"])])])],64))));Dl.render=$l,Dl.__scopeId="data-v-306df169";const Al=[];Al.push(...dt),Al.push(...ca),Al.push(...Nl),Al.push({path:"/settings",name:"settings",component:Dl});const Ml=E({history:O(),routes:Al});var Hl={products:e=>e.products,product:e=>e.product,productId(e){var t;return null==(t=e.product)?void 0:t.id}},zl={fetchProducts(e,t){e.products=t},fetchProduct(e,t){e.product=t},activateProduct(e){e.product.active=!0},deactivateProduct(e){e.product.active=!1},editProduct(t,{name:a,description:l}){t.product=e(e({},t.product),{name:a,description:l})},addUnit(e,t){e.product.units.push(t)},activateUnit(e,t){e.product.units.forEach((e=>{t===e.id&&(e.active=!0)}))},deactivateUnit(e,t){e.product.units.forEach((e=>{t===e.id&&(e.active=!1)}))},editUnit(t,{unitId:a,payload:l}){t.product.units=t.product.units.map((t=>a===t.id?e(e({},t),l):t))}};const Kl=window.location.hostname||"localhost",Gl=N.create({baseURL:`http://${Kl}:8000/api/`});class Xl{constructor(e){this.BASE_ENDPOINT=e}fetchAll(e={}){return Gl.get(`${this.BASE_ENDPOINT}/`,{params:e})}fetchOneById(e){return Gl.get(`${this.BASE_ENDPOINT}/${e}/`)}add(e){return Gl.post(`${this.BASE_ENDPOINT}/`,e)}updateById(e,t){return Gl.patch(`${this.BASE_ENDPOINT}/${e}/`,t)}}var Ql={products:new class extends Xl{activateProduct(e){return Gl.patch(`products/${e}/`,{active:!0})}deactivateProduct(e){return Gl.patch(`products/${e}/`,{active:!1})}addUnit(e){return Gl.post("units/",e)}updateUnitById(e,t){return Gl.patch(`units/${e}/`,t)}activateUnit(e){return Gl.patch(`units/${e}/`,{active:!0})}deactivateUnit(e){return Gl.patch(`units/${e}/`,{active:!1})}}("products"),customers:new Xl("customers"),orders:new Xl("orders"),orderDetails:new Xl("orders/details")},Jl={namespaced:!0,state:()=>({products:[],product:null}),getters:Hl,mutations:zl,actions:{async fetchProducts({commit:e},t={}){e("fetchProducts",(await Ql.products.fetchAll(t)).data)},async fetchProduct({commit:e},t){e("fetchProduct",(await Ql.products.fetchOneById(t)).data)},async addProduct(e,t){const a=await Ql.products.add(t);Ml.push(`/products/${a.data.id}`)},async editProduct({commit:e,getters:t},a){await Ql.products.updateById(t.productId,a),e("editProduct",a)},async activateProduct({commit:e,getters:t}){await Ql.products.activateProduct(t.productId),e("activateProduct")},async deactivateProduct({commit:e,getters:t}){await Ql.products.deactivateProduct(t.productId),e("deactivateProduct")},async addUnit({commit:e},t){e("addUnit",(await Ql.products.addUnit(t)).data)},async editUnit({commit:e},{unitId:t,payload:a}){await Ql.products.updateUnitById(t,a),e("editUnit",{unitId:t,payload:a})},async activateUnit({commit:e},t){await Ql.products.activateUnit(t),e("activateUnit",t)},async deactivateUnit({commit:e},t){await Ql.products.deactivateUnit(t),e("deactivateUnit",t)}}},Wl={namespaced:!0,state:()=>({customers:[],customer:null}),getters:{customers:e=>e.customers,customer:e=>e.customer,customerName(e){var t,a;return null!=(a=null==(t=e.customer)?void 0:t.name)?a:""},customerId(e){var t;return null==(t=e.customer)?void 0:t.id}},mutations:{fetchCustomers(e,t){e.customers=t},fetchCustomer(e,t){e.customer=t},editCustomer(t,a){t.customer=e(e({},t.customer),a)}},actions:{async fetchCustomers({commit:e},t={}){e("fetchCustomers",(await Ql.customers.fetchAll(t)).data)},async fetchCustomer({commit:e},t){e("fetchCustomer",(await Ql.customers.fetchOneById(t)).data)},async addCustomer(e,t){const a=await Ql.customers.add(t);Ml.push({name:"customer-detail",params:{id:a.data.id}})},async editCustomer({commit:e,getters:t},a){await Ql.customers.updateById(t.customerId,a),e("editCustomer",a)}}},Yl={namespaced:!0,state:()=>({orders:[],order:null,customer:null}),getters:{orders:e=>e.orders,order:e=>e.order,orderId(e){var t;return null==(t=e.order)?void 0:t.id},customer:e=>e.customer,subtotal(e){var t;return(null==(t=e.order)?void 0:t.details.reduce(((e,t)=>e+parseFloat(t.cost)),0))||0},payment(e){var t;return(null==(t=e.order)?void 0:t.payment)||0}},mutations:{fetchOrders(e,t){e.orders=t},fetchOrder(e,t){e.order=t},editOrder(t,a){t.order=e(e({},t.order),a)},fetchOrderCusomer(e,t){e.customer=t},addDetail(e,t){e.order.details.push(t)},editDetail(e,{id:t,detail:a}){e.order.details=e.order.details.map((e=>e.id===t?a:e));const l=e.order.details.every((e=>e.ready)),s=e.order.details.every((e=>!e.ready));e.order.status=l?"r":s?"o":"p"}},actions:{async fetchOrders({commit:e},t={}){e("fetchOrders",(await Ql.orders.fetchAll(t)).data)},async fetchOrder({commit:e},t){const a=await Ql.orders.fetchOneById(t);e("fetchOrder",a.data);e("fetchOrderCusomer",(await Ql.customers.fetchOneById(a.data.customer)).data)},async addOrder(e,t){const a=await Ql.orders.add(t);Ml.push({name:"order-detail",params:{id:a.data.id}})},async editOrder({commit:e,getters:t},a){await Ql.orders.updateById(t.orderId,a),e("editOrder",a)},async addDetail({commit:e},t){e("addDetail",(await Ql.orderDetails.add(t)).data)},async editDetail({commit:e},{id:t,payload:a}){e("editDetail",{id:t,detail:(await Ql.orderDetails.updateById(t,a)).data})}}};const Zl=D({locale:"en",messages:{en:{navbar:{products:"Products",customers:"Customers",orders:"Orders",settings:"Settings"},products:{list:"Product List",table:{product:"Product",unit:"Measurement Unit",price:"Price"},addButton:"Add Product",name:"Name",namePlaceholder:"Enter product name",description:"Description",descriptionPlaceholder:"Enter product description",addTitle:"Add Product",detailTitle:"Product",searchPlaceholder:"Enter name to search for products"},units:{title:"Units",name:"Name",namePlaceholder:"Enter unit name",price:"Price",pricePlaceholder:"Enter price",action:"Action"},customers:{searchPlaceholder:"Enter name to search for customers",list:"Customer List",addButton:"Add Customer",table:{customer:"Customer",phone:"Phone",address:"Address",debt:"Debt"},detailTitle:"Customer",description:"Description",namePlaceholder:"Enter customer name",phonePlaceholder:"Enter customer phone number",addressPlaceholder:"Enter customer address",descriptionPlaceholder:"Enter customer description",addTitle:"Add Customer"},orders:{searchPlaceholder:"Enter customer name to search for orders",list:"Order List",addButton:"Add Order",table:{date:"Date",subtotal:"Subtotal",total:"Total",payment:"Payment",remain:"Remain",status:"Status"},status:{o:"Ordered",p:"Preparing",r:"Ready",s:"Shipped"},detailTitle:"Order",details:{title:"Order Details",quantity:"Quantity",cost:"Cost",ready:"Ready",add:"Add Order Detail",edit:"Edit",editTitle:"Edit Order Detail",select:"Select Measurement Unit"},quantityPlaceholder:"Enter quantity",pay:"Pay",paymentPlaceholder:"Enter payment",payment:{title:"Payment",payment:"Payment"}},settings:{title:"Settings",selectLanguage:"Select your language"},add:"Add",save:"Save",cancel:"Cancel",recover:"Recover",edit:"Edit",delete:"Delete",search:"Search"},vi:{navbar:{products:"Hàng Hóa",customers:"Khách Hàng",orders:"Đơn Hàng",settings:"Cài Đặt"},products:{list:"Danh sách các mặt hàng",table:{product:"Tên hàng",unit:"Đơn vị tính",price:"Giá tiền"},addButton:"Thêm mặt hàng",name:"Tên hàng",namePlaceholder:"Nhập tên hàng",description:"Thông tin mặt hàng",descriptionPlaceholder:"Nhập thông tin về mặt hàng",addTitle:"Thêm Mặt Hàng",detailTitle:"Thông tin hàng",searchPlaceholder:"Nhập tên để tìm kiếm hàng"},units:{title:"Đơn vị tính",name:"Đơn vị",namePlaceholder:"Nhập đơn vị",price:"Giá tiền",pricePlaceholder:"Nhập giá tiền",action:""},customers:{searchPlaceholder:"Nhập tên để tìm kiếm khách hàng",list:"Danh sách khách hàng",addButton:"Thêm Khách Hàng",table:{customer:"Tên Khách Hàng",phone:"S.Đ.T.",address:"Địa Chỉ",debt:"Nợ Cũ"},detailTitle:"Khách Hàng",description:"Thông Tin Khách Hàng",namePlaceholder:"Nhập tên khách hàng",phonePlaceholder:"Nhập số  điện thoại của khách hàng",addressPlaceholder:"Nhập địa chỉ của khách hàng",descriptionPlaceholder:"Nhập thông tin khách hàng",addTitle:"Thêm Khách Hàng"},orders:{searchPlaceholder:"Nhập tên khách hàng để tìm kiếm đơn hàng",list:"Danh sách đơn hàng",addButton:"Thêm Đơn Hàng",table:{date:"Ngày",subtotal:"Tổng tiền hàng",total:"Tổng tiền",payment:"Đã thanh toán",remain:"Còn thiếu",status:"Trạng Thái"},status:{o:"Chưa soạn",p:"Đang soạn",r:"Soạn xong",s:"Đã chở"},detailTitle:"Đơn Hàng",details:{title:"Thông Tin Đơn Hàng",quantity:"Số Lượng",cost:"Thành Tiền",ready:"Đã Soạn",add:"Thêm Mặt Hàng",edit:"",editTitle:"Chỉnh Sửa Thông Tin Hàng",select:"Chọn Đơn Vị Tính"},quantityPlaceholder:"Nhập số lượng hàng",pay:"Thanh toán",paymentPlaceholder:"Nhập số tiền đã thanh toán",payment:{title:"Thanh Toán",payment:"Số tiền đã thanh toán"}},settings:{title:"Cài Đặt",selectLanguage:"Lựa chọn ngôn ngữ"},add:"Thêm",save:"Lưu",cancel:"Hủy",recover:"Phục hồi",edit:"Chỉnh sửa",delete:"Xóa",search:"Tìm kiếm"}},numberFormats:{en:{currency:{style:"currency",currency:"USD"}},vi:{currency:{style:"currency",currency:"VND"}}}});var es=L({modules:{products:Jl,customers:Wl,orders:Yl},state:{language:localStorage.getItem("language")||"vi"},getters:{language:e=>e.language},mutations:{changeLanguage(e,t){localStorage.setItem("language",t),e.language=t,Zl.global.locale=t}},actions:{changeLanguage({commit:e},t){e("changeLanguage",t)},setLanguage({getters:e}){Zl.global.locale=e.language}}});const ts=q(H);ts.use(Ml),ts.use(es),ts.use(Zl),ts.mount("#app");
